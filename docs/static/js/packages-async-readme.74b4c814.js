(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"./packages/actions/lib/actions.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=n("./node_modules/typesafe-actions/dist/typesafe-actions.umd.production.js");t.createAction=s.action,a.__exportStar(n("./node_modules/redux-actions/es/index.js"),t)},"./packages/ajax/lib/axios.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onStatusError=t.emptyFunc=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importDefault(n("./node_modules/axios/index.js")),r=a.__importDefault(n("./packages/event-center/lib/index.js")),c=n("./packages/ajax/lib/consts.js");t.default=s.default.create({timeout:5e3,withCredentials:!0,headers:{}}),t.emptyFunc=function(){},t.onStatusError=function(e){var t="response"in e&&e.response,n=t?{code:t.status,message:t.data&&t.data.message?t.data.message:t.statusText}:{code:e instanceof s.default.Cancel?c.AjaxCancelCode:c.AjaxErrorCode,message:e.message};return 401!==n.code&&403!==n.code||r.default.emit("common.user.status",n),n};var o=n("./packages/ajax/lib/consts.js");Object.defineProperty(t,"promiseFactory",{enumerable:!0,get:function(){return o.promiseFactory}})},"./packages/ajax/lib/consts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseFactory=t.GraphQLErrorCode=t.AjaxErrorCode=t.AjaxCancelMessage=t.AjaxCancelCode=void 0,t.AjaxCancelCode=10499,t.AjaxCancelMessage="AJAX_CANCEL_MESSAGE",t.AjaxErrorCode=10001,t.GraphQLErrorCode=10002,t.promiseFactory=function(){var e,t,n=new Promise((function(n,a){e=n,t=a}));return[{reject:t,resolve:e},n]}},"./packages/ajax/lib/graphql.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.request=t.GraphQLClient=t.extractCodeAndMessage=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importDefault(n("./packages/ajax/node_modules/qs/lib/index.js")),r=a.__importDefault(n("./node_modules/axios/index.js")),c=n("./packages/ajax/lib/consts.js"),o=n("./packages/ajax/lib/axios.js");function i(e){return e.reduce((function(e,t){var n=t.message;if("string"===typeof n)e.message=(e.message?e.message+"\n":e.message)+n;else{var a=n.error,s=n.statusCode;(401===s||403===s&&401!==e.code)&&(e.code=s),e.message+=a+"\n"}return e}),{code:c.GraphQLErrorCode,message:""})}t.extractCodeAndMessage=i;var l="undefined"!==typeof location&&s.default.parse(location.search.split("?")[1]).testUser,u=function(){function e(e,t){this.url=e,this.options=t||{}}return e.prototype.request=function(e,t,n){return a.__awaiter(this,void 0,void 0,(function(){var s,c,u,d,p,A;return a.__generator(this,(function(f){return s=this.options,c=s.headers,u=a.__rest(s,["headers"]),d=JSON.stringify({query:e,variables:t||void 0}),p=a.__assign({url:this.url,method:"POST",headers:a.__assign(a.__assign({"Content-Type":"application/json"},c),n&&n.headers),data:d},u),l&&(p.headers["Test-User"]=l),(A=n&&n.cancel)&&(p.cancelToken=new r.default.CancelToken((function(e){A.then(e,o.emptyFunc)}))),[2,r.default.request(p).then((function(e){return 200!==e.status||!e.data||e.data.errors&&e.data.errors.length?a.__assign({result:e.data&&e.data.data},i(e.data.errors||[])):{code:0,result:e.data.data}}),o.onStatusError)]}))}))},e.prototype.setHeaders=function(e){return this.options.headers=e,this},e.prototype.setHeader=function(e,t){var n,a=this.options.headers;return a?a[e]=t:this.options.headers=((n={})[e]=t,n),this},e}();function d(e,t,n,s){return a.__awaiter(this,void 0,void 0,(function(){return a.__generator(this,(function(a){return[2,new u(e).request(t,n,s)]}))}))}t.GraphQLClient=u,t.request=d,t.default=d},"./packages/ajax/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importDefault(n("./packages/ajax/lib/new-ajax.js"));a.__exportStar(n("./packages/ajax/lib/axios.js"),t),a.__exportStar(n("./packages/ajax/lib/new-ajax.js"),t),a.__exportStar(n("./packages/ajax/lib/graphql.js"),t),t.default=s.default;var r=n("./packages/ajax/lib/consts.js");Object.defineProperty(t,"AjaxCancelCode",{enumerable:!0,get:function(){return r.AjaxCancelCode}}),Object.defineProperty(t,"AjaxErrorCode",{enumerable:!0,get:function(){return r.AjaxErrorCode}}),Object.defineProperty(t,"GraphQLErrorCode",{enumerable:!0,get:function(){return r.GraphQLErrorCode}}),Object.defineProperty(t,"AjaxCancelMessage",{enumerable:!0,get:function(){return r.AjaxCancelMessage}})},"./packages/ajax/lib/new-ajax.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WrappedFetch=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importDefault(n("./packages/ajax/node_modules/qs/lib/index.js")),r=a.__importDefault(n("./node_modules/axios/index.js")),c=a.__importStar(n("./packages/ajax/lib/axios.js")),o=n("./packages/ajax/lib/consts.js"),i="undefined"!==typeof location&&s.default.parse(location.search.split("?")[1]).testUser,l=function(){function e(){this.autoCatch=!0}return e.prototype.ajax=function(e,t,n){var l=e.method,u=e.url,d=e.data,p=e.form,A=e.query,f=e.header,b=e.extra,m=e.cancel,y=e.headers,g=a.__assign(a.__assign({},b),{method:l.toLowerCase(),headers:a.__assign(a.__assign({},y),f)});i&&(g.headers["Test-User"]=i),d&&(g=a.__assign(a.__assign({},g),{headers:a.__assign({"Content-Type":"application/json"},g.headers),data:d})),p&&(g=a.__assign(a.__assign({},g),{headers:a.__assign({"Content-Type":"application/x-www-form-urlencoded"},g.headers),data:s.default.stringify(p)}));var j=o.promiseFactory(),E=j[0].resolve,_=j[1];g.cancelToken=new r.default.CancelToken((function(e){m&&m.then(e,c.emptyFunc),_.then(e,c.emptyFunc)}));var O=c.default.request(a.__assign(a.__assign({},g),{url:i?-1===u.indexOf("?")?u+"?testUser="+i:u.replace("?",(function(){return"?testUser="+i})):u,params:A})).then((function(e){return e.data}));return this.autoCatch&&(O=O.catch(c.onStatusError)),O.cancel=E,O},e.prototype.check=function(e,t){if(null===e||void 0===e){0}},e}();t.WrappedFetch=l,t.default=new l},"./packages/async/README.mdx":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return X}));var a=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),s=n("./node_modules/react/index.js"),r=n.n(s),c=n("./node_modules/@mdx-js/react/dist/esm.js"),o=n("./node_modules/docz/dist/index.esm.js"),i=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),l=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),u=n("./packages/event/lib/index.js"),d=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js"),p=n.n(d),A=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js"),f=n("./packages/model/lib/index.js"),b=n("./packages/use-model/lib/index.js"),m=n("./packages/ajax/lib/index.js"),y=n("./packages/model-factory/lib/index.js").ASYNC_EFFECT_EVENT_NAME;"undefined"!==typeof y&&y&&y===Object(y)&&Object.isExtensible(y)&&Object.defineProperty(y,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ASYNC_EFFECT_EVENT_NAME",filename:"packages/async/src/consts.ts"}}),"undefined"!==typeof AsyncEffectEventType&&AsyncEffectEventType&&AsyncEffectEventType===Object(AsyncEffectEventType)&&Object.isExtensible(AsyncEffectEventType)&&Object.defineProperty(AsyncEffectEventType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncEffectEventType",filename:"packages/async/src/consts.ts"}});"ASYNC_RESULT_EVENT_NAME"===Object("ASYNC_RESULT_EVENT_NAME")&&Object.isExtensible("ASYNC_RESULT_EVENT_NAME")&&Object.defineProperty("ASYNC_RESULT_EVENT_NAME","__filemeta",{enumerable:!0,configurable:!0,value:{name:"ASYNC_RESULT_EVENT_NAME",filename:"packages/async/src/consts.ts"}}),"undefined"!==typeof AsyncResultEventType&&AsyncResultEventType&&AsyncResultEventType===Object(AsyncResultEventType)&&Object.isExtensible(AsyncResultEventType)&&Object.defineProperty(AsyncResultEventType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncResultEventType",filename:"packages/async/src/consts.ts"}});"ASYNC_STATUS_CHANGE_NAME"===Object("ASYNC_STATUS_CHANGE_NAME")&&Object.isExtensible("ASYNC_STATUS_CHANGE_NAME")&&Object.defineProperty("ASYNC_STATUS_CHANGE_NAME","__filemeta",{enumerable:!0,configurable:!0,value:{name:"ASYNC_STATUS_CHANGE_NAME",filename:"packages/async/src/consts.ts"}}),"undefined"!==typeof AsyncForm&&AsyncForm&&AsyncForm===Object(AsyncForm)&&Object.isExtensible(AsyncForm)&&Object.defineProperty(AsyncForm,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncForm",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof AsyncFormProps&&AsyncFormProps&&AsyncFormProps===Object(AsyncFormProps)&&Object.isExtensible(AsyncFormProps)&&Object.defineProperty(AsyncFormProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncFormProps",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof AsyncModalProps&&AsyncModalProps&&AsyncModalProps===Object(AsyncModalProps)&&Object.isExtensible(AsyncModalProps)&&Object.defineProperty(AsyncModalProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncModalProps",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof EnsureArgumentsType&&EnsureArgumentsType&&EnsureArgumentsType===Object(EnsureArgumentsType)&&Object.isExtensible(EnsureArgumentsType)&&Object.defineProperty(EnsureArgumentsType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EnsureArgumentsType",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof EnsureSingleArgumentsType&&EnsureSingleArgumentsType&&EnsureSingleArgumentsType===Object(EnsureSingleArgumentsType)&&Object.isExtensible(EnsureSingleArgumentsType)&&Object.defineProperty(EnsureSingleArgumentsType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"EnsureSingleArgumentsType",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof NewAsyncParams&&NewAsyncParams&&NewAsyncParams===Object(NewAsyncParams)&&Object.isExtensible(NewAsyncParams)&&Object.defineProperty(NewAsyncParams,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"NewAsyncParams",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof IAsyncConfirmedParams&&IAsyncConfirmedParams&&IAsyncConfirmedParams===Object(IAsyncConfirmedParams)&&Object.isExtensible(IAsyncConfirmedParams)&&Object.defineProperty(IAsyncConfirmedParams,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IAsyncConfirmedParams",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof IAsyncActionProps&&IAsyncActionProps&&IAsyncActionProps===Object(IAsyncActionProps)&&Object.isExtensible(IAsyncActionProps)&&Object.defineProperty(IAsyncActionProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IAsyncActionProps",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof AsyncStatus&&AsyncStatus&&AsyncStatus===Object(AsyncStatus)&&Object.isExtensible(AsyncStatus)&&Object.defineProperty(AsyncStatus,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncStatus",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof IAsyncState&&IAsyncState&&IAsyncState===Object(IAsyncState)&&Object.isExtensible(IAsyncState)&&Object.defineProperty(IAsyncState,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"IAsyncState",filename:"packages/async/src/asyncModel.ts"}});var g=1,j=function(){return g++};j&&j===Object(j)&&Object.isExtensible(j)&&Object.defineProperty(j,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"getAsyncId",filename:"packages/async/src/asyncModel.ts"}});var E=function(e,t){t&&(e.fetch=t);var n=e.onError,a=e.onSuccess,s=e.callback,r=e.ASYNC_ID,c=void 0===r?g++:r;return Object(i.a)(Object(i.a)({},e),{},{ASYNC_ID:c,callback:function(e){e.code?n&&n(e):a&&a(e),s&&s(e)}})},_=Object(b.M)({namespace:"@ekit/async/Model",state:{asyncStatus:[]},reducers:{doAsyncStart:function(e,t){return Object(i.a)(Object(i.a)({},e),{},{asyncStatus:e.asyncStatus.concat([Object(i.a)(Object(i.a)({errorMsg:null,successMsg:null},t.payload),{},{response:null,isFetch:!1,confirmed:!1})])})},doAsyncConfirmedStart:function(e,t){var n=!0,a=t.payload.ASYNC_ID,s=e.asyncStatus.map((function(e){if(e.ASYNC_ID===a){n=!1;var s=e.modalProps,r=e.formProps,c=Object(i.a)(Object(i.a)(Object(i.a)({errorMsg:null,successMsg:null},e),t.payload),{},{response:null,isFetch:!0,confirmed:!0});return s&&(c.modalProps=s),r&&(c.formProps=r),c}return e}));return n&&s.push(Object(i.a)(Object(i.a)({errorMsg:null,successMsg:null},t.payload),{},{response:null,isFetch:!0,confirmed:!0})),Object(i.a)(Object(i.a)({},e),{},{asyncStatus:s})},doAsyncEnd:function(e,t){var n=t.payload,a=n.ASYNC_ID,s=n.successMsg,r=n.errorMsg,c=n.response,o=n.isSuccess,l=n.isFetch;return Object(i.a)(Object(i.a)({},e),{},{asyncStatus:e.asyncStatus.reduce((function(e,t){if(t.ASYNC_ID===a){var n=t.successMsg,d=t.errorMsg,p=t.isFetch,A=t.isModal,f=t.response||c,b=void 0!==o;if((b||p&&!1!==l)&&b){var m=o?"success":"error",y=o?f&&f.message||"\u64cd\u4f5c\u6210\u529f":f&&f.message||"\u64cd\u4f5c\u5931\u8d25",g=o?s:r,j=o?n:d;if(!1!==g&&!1!==j){var E=g||j||y;if("function"===typeof E&&(E=E(f)),E){var _={type:m,message:E};u.EventCenter.emit("ASYNC_RESULT_EVENT_NAME",_)}}}A&&e.push(Object(i.a)(Object(i.a)({},t),{},{visible:!1===o,confirmed:!1,isFetch:!1}))}else e.push(t);return e}),[])})},doClearModal:function(e){return Object(i.a)(Object(i.a)({},e),{},{asyncStatus:e.asyncStatus.filter((function(e){return!1!==e.visible}))})}},effects:{doAsync:[function(){var e=Object(A.a)(p.a.mark((function e(t,n){var a,s,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tPut,s=n.payload.modalProps,r=function(){return a(_.actions.doClearModal)},e.next=5,a(_.actions.doAsyncStart,Object(i.a)(Object(i.a)({ASYNC_ID:"ASYNC_ID"in n.payload?n.payload.ASYNC_ID:j(),isModal:!0},n.payload),(null===s||void 0===s?void 0:s.afterClose)?{modalProps:{afterClose:function(){(null===s||void 0===s?void 0:s.afterClose)&&(null===s||void 0===s||s.afterClose()),r()}}}:void 0));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{silent:!0}],doAsyncConfirmed:[function(){var e=Object(A.a)(p.a.mark((function e(t,n){var a,s,r,c,o,l,u,d,A,f,b,y,g,j,O;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tPut,s=E(n.payload),e.next=4,a(_.actions.doAsyncConfirmedStart,s);case 4:if(c=s.paramsGenerator,o=s.params,l=s.extraParams,u=s.fetch,d=s.callback,A=s.ASYNC_ID,e.prev=5,f=[],"function"!==typeof c){e.next=12;break}b=c(n.payload),f.push.apply(f,Array.isArray(b)?b:[b]),e.next=20;break;case 12:if(y=Array.isArray(o),g=Array.isArray(l),!y||!g){e.next=19;break}throw"\u5f53 fetch \u62e5\u6709\u591a\u4e2a\u53c2\u6570\u60c5\u5f62\u4e0b, async \u65e0\u6cd5\u6b63\u786e\u5904\u7406\uff0c\u8bf7\u5728 paramsGenerator \u5185\u5904\u7406",Error("\u5f53 fetch \u62e5\u6709\u591a\u4e2a\u53c2\u6570\u60c5\u5f62\u4e0b, async \u65e0\u6cd5\u6b63\u786e\u5904\u7406\uff0c\u8bf7\u5728 paramsGenerator \u5185\u5904\u7406");case 19:y||g?(y||g)&&f.push.apply(f,y?o:l):f.push.apply(f,[o&&"object"===typeof o||l&&"object"===typeof l?Object(i.a)(Object(i.a)({},o),l):l||o]);case 20:return e.next=22,u.apply(void 0,f);case 22:r=e.sent,e.next=28;break;case 25:e.prev=25,e.t0=e.catch(5),r={code:10002,message:e.t0.message};case 28:return d&&d(r),j=!(r&&r.code),O={ASYNC_ID:A,isSuccess:j,response:r},r.code===m.AjaxCancelCode&&(O.isFetch=!1,O.isSuccess=void 0),e.next=34,a(_.actions.doAsyncEnd,O);case 34:case"end":return e.stop()}}),e,null,[[5,25]])})));return function(t,n){return e.apply(this,arguments)}}(),{silent:!0}],doAsyncCancel:[function(){var e=Object(A.a)(p.a.mark((function e(t,n){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.tPut,e.next=3,a(_.actions.doAsyncEnd,{ASYNC_ID:n.payload,successMsg:!1});case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),{silent:!0}]}});"undefined"!==typeof AsyncModelActions&&AsyncModelActions&&AsyncModelActions===Object(AsyncModelActions)&&Object.isExtensible(AsyncModelActions)&&Object.defineProperty(AsyncModelActions,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncModelActions",filename:"packages/async/src/asyncModel.ts"}});var O=_;function C(e){var t=Object(f.useModel)(O),n=Object(l.a)(t,2),a=n[0],r=n[1],c=Object(s.useCallback)((function(t){var n,a,s=t.modalProps,c=void 0===s?{}:s,o=t.formProps,l=t.onCancel,u=j(),d=o?Object(i.a)(Object(i.a)({},c),{},{className:"tkit-async-modal ".concat(c&&c.className||""),content:e.renderForm(Object(i.a)(Object(i.a)({},o),{},{getForm:function(e){n=e}})),onOk:(a=Object(A.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=4;break}return e.next=3,n.submit();case 3:t=e.sent;case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),function(){return a.apply(this,arguments)})}):c;if(d){var f=d.onCancel,b=d.onOk;d.onCancel=Object(A.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!f){e.next=4;break}return e.next=4,f();case 4:return e.next=6,Promise.all([r.doAsyncCancel(u||-1),l&&l()]);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])}))),d.onOk=Object(A.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n={},!b){e.next=6;break}return e.next=5,b();case 5:n=e.sent;case 6:return e.next=8,r.doAsyncConfirmed(Object(i.a)(Object(i.a)({ASYNC_ID:u},t),{},{extraParams:n}));case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))}return Object(i.a)(Object(i.a)({},t),{},{ASYNC_ID:u,modalProps:d})}),[r,e]),o=Object(i.a)(Object(i.a)({},r),{},{doAsync:function(e){return r.doAsync(c(e))}});return[a.asyncStatus,o]}function v(e){var t=e.loading,n=e.modal,a=e.form,c=e.tips,o=e.sharedLoading,d=C(Object(s.useMemo)((function(){return{renderForm:function(e){return r.a.createElement(a,e)}}}),[])),p=Object(l.a)(d,2),A=p[0],f=p[1];Object(s.useEffect)((function(){var e=c?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return setTimeout((function(){return c.apply(null,t)}),0)}:c;return e&&u.EventCenter.on("ASYNC_RESULT_EVENT_NAME",e),function(){e&&u.EventCenter.off("ASYNC_RESULT_EVENT_NAME",e)}}),[c]),Object(s.useEffect)((function(){var e=function(e){var t=e.type,n=e.payload;t in f&&f[t].call(null,Object(i.a)({effectName:"".concat(O.namespace,"/").concat(t)},n))};return u.EventCenter.on(y,e),function(){u.EventCenter.off(y,e)}}),[f]),Object(s.useEffect)((function(){u.EventCenter.emit("ASYNC_STATUS_CHANGE_NAME",A)}),[A]);var b=0,m=A.map((function(e){var a=e.ASYNC_ID,s=e.modalProps,c=e.isFetch,o=e.isModal,i=e.indicator,l=e.visible,u=void 0===l||l;if(o)return r.a.createElement(n,Object.assign({afterClose:f.doClearModal},s,{key:a,visible:u,confirmLoading:c}),s&&s.content);if(c){if(void 0!==i)return i;if(t)return r.a.createElement(t,{key:a,status:e});b++}return null}));return r.a.createElement(r.a.Fragment,null,m,b&&o?r.a.createElement(o,null):null)}"undefined"!==typeof O&&O&&O===Object(O)&&Object.isExtensible(O)&&Object.defineProperty(O,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"asyncModel",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof AsyncModelType&&AsyncModelType&&AsyncModelType===Object(AsyncModelType)&&Object.isExtensible(AsyncModelType)&&Object.defineProperty(AsyncModelType,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncModelType",filename:"packages/async/src/asyncModel.ts"}}),"undefined"!==typeof UseAsyncConfig&&UseAsyncConfig&&UseAsyncConfig===Object(UseAsyncConfig)&&Object.isExtensible(UseAsyncConfig)&&Object.defineProperty(UseAsyncConfig,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"UseAsyncConfig",filename:"packages/async/src/useAsync.ts"}}),C&&C===Object(C)&&Object.isExtensible(C)&&Object.defineProperty(C,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAsync",filename:"packages/async/src/useAsync.ts"}}),"undefined"!==typeof AsyncProps&&AsyncProps&&AsyncProps===Object(AsyncProps)&&Object.isExtensible(AsyncProps)&&Object.defineProperty(AsyncProps,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncProps",filename:"packages/async/src/Async.tsx"}}),v&&v===Object(v)&&Object.isExtensible(v)&&Object.defineProperty(v,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Async",filename:"packages/async/src/Async.tsx"}});var S=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js"),T=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js"),x=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js"),k=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js"),h=n("./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js"),F=n("./node_modules/antd/es/spin/index.js"),M=n("./node_modules/antd/es/modal/index.js"),P=n("./node_modules/antd/es/message/index.js"),B=n("./node_modules/antd/es/button/index.js"),I=n("./node_modules/antd/es/input/index.js");n("./node_modules/antd/dist/antd.css");"undefined"!==typeof AsyncStatusSelector&&AsyncStatusSelector&&AsyncStatusSelector===Object(AsyncStatusSelector)&&Object.isExtensible(AsyncStatusSelector)&&Object.defineProperty(AsyncStatusSelector,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncStatusSelector",filename:"packages/async/src/useAsyncStatus.ts"}});function N(e){var t=Object(s.useState)(),n=Object(l.a)(t,2),a=n[0],r=n[1];return Object(s.useEffect)((function(){var t=function(t){var n=function(e,t){return e.find((function(e){if(e.isFetch&&(t&&t(e)||!t))return e}))}(t,e);n!==a&&r(n)};return u.EventCenter.on("ASYNC_STATUS_CHANGE_NAME",t),function(){u.EventCenter.off("ASYNC_STATUS_CHANGE_NAME",t)}}),[e,a]),[a]}N&&N===Object(N)&&Object.isExtensible(N)&&Object.defineProperty(N,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"useAsyncStatus",filename:"packages/async/src/useAsyncStatus.ts"}});function R(e,t){var n=new Promise((function(n,a){var s=e.callback,r=e.onCancel;t(Object(i.a)(Object(i.a)({},e),{},{onCancel:function(){r&&r(),a()},callback:function(e){s&&s(e),n(e)}}))}));return n.then((function(){return null}),(function(){return null})),n}v&&v===Object(v)&&Object.isExtensible(v)&&Object.defineProperty(v,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Async",filename:"packages/async/src/index.ts"}});var w=function(e){return R(e,(function(e){var t={type:"doAsync",payload:e};u.EventCenter.emit(y,t)}))};w&&w===Object(w)&&Object.isExtensible(w)&&Object.defineProperty(w,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"doAsync",filename:"packages/async/src/index.ts"}});var D=function(e){return R(e,(function(e){var t={type:"doAsyncConfirmed",payload:e};u.EventCenter.emit(y,t)}))};D&&D===Object(D)&&Object.isExtensible(D)&&Object.defineProperty(D,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"doAsyncConfirmed",filename:"packages/async/src/index.ts"}});var K=function(){return u.EventCenter.emit(y,{type:"doClearModal"})};K&&K===Object(K)&&Object.isExtensible(K)&&Object.defineProperty(K,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"doClearModal",filename:"packages/async/src/index.ts"}}),window.__TKIT_USE_MODEL_LOGGER__=console.log;var Y=function(e){Object(k.a)(n,e);var t=Object(h.a)(n);function n(e){var a;return Object(S.a)(this,n),a=t.call(this,e),e.getForm&&e.getForm(Object(x.a)(a)),a}return Object(T.a)(n,[{key:"submit",value:function(){return n.fakeData}},{key:"render",value:function(){return r.a.createElement("div",null,"nihao")}}]),n}(r.a.Component);Y.fakeData={name:"skipper"},"undefined"!==typeof Y&&Y&&Y===Object(Y)&&Object.isExtensible(Y)&&Object.defineProperty(Y,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"FormFaker",filename:"packages/async/__tests__/Example.tsx"}});var G=function(e,t){return console.log("running effect"),new Promise((function(n,a){var s=setTimeout((function(){return n({code:0,message:"\u9017\u6211\u5462",result:{id:e}})}),1e3);t&&t.cancel&&t.cancel.then((function(){clearTimeout(s)}))}))};function Q(){return r.a.createElement("div",null,r.a.createElement(v,{form:Y,loading:function(e){return r.a.createElement(F.a,{spinning:e.status.isFetch})},modal:M.a,tips:function(e){var t=e.type,n=e.message;return P.b[t](n)}}),r.a.createElement(B.a,{onClick:function(){var e=Object(m.promiseFactory)(),t=Object(l.a)(e,2),n=t[0].resolve,a=t[1];w({fetch:G,callback:console.log,modalProps:{title:"nihao",content:r.a.createElement("div",null,r.a.createElement(I.a,null),r.a.createElement(B.a,{onClick:function(){w({fetch:G,modalProps:{content:"\u4f60\u597d",title:"2"}})}},"\u5d4c\u5957\u4e86")),onCancel:n},paramsGenerator:function(){return[1,{cancel:a}]}})}},"\u5f39\u7a97\u6d4b\u8bd5"),"\xa0",r.a.createElement(B.a,{onClick:function(){D({fetch:G,callback:console.log})}},"\u4e0d\u5f39\u7a97\u5e26loading\u6d4b\u8bd5"),"\xa0",r.a.createElement(B.a,{onClick:function(){D({fetch:G,callback:console.log,indicator:null})}},"\u4e0d\u663e\u793aloading\u6d4b\u8bd5"))}function U(e){}function J(e){}function H(e){}function L(e){}function V(e){}function W(e){}Q&&Q===Object(Q)&&Object.isExtensible(Q)&&Object.defineProperty(Q,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"Example",filename:"packages/async/__tests__/Example.tsx"}}),U&&U===Object(U)&&Object.isExtensible(U)&&Object.defineProperty(U,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"StatusFaker",filename:"packages/async/__tests__/Example.tsx"}}),J&&J===Object(J)&&Object.isExtensible(J)&&Object.defineProperty(J,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"FormCoreFaker",filename:"packages/async/__tests__/Example.tsx"}}),H&&H===Object(H)&&Object.isExtensible(H)&&Object.defineProperty(H,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ModalFaker",filename:"packages/async/__tests__/Example.tsx"}}),L&&L===Object(L)&&Object.isExtensible(L)&&Object.defineProperty(L,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"ResultTypeFaker",filename:"packages/async/__tests__/Example.tsx"}}),V&&V===Object(V)&&Object.isExtensible(V)&&Object.defineProperty(V,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncFaker",filename:"packages/async/__tests__/Example.tsx"}}),W&&W===Object(W)&&Object.isExtensible(W)&&Object.defineProperty(W,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"AsyncConfirmedFaker",filename:"packages/async/__tests__/Example.tsx"}});var q={};function X(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(c.b)("wrapper",Object.assign({},q,n,{components:t,mdxType:"MDXLayout"}),Object(c.b)("h1",{id:"async"},"Async"),Object(c.b)("p",null,"Tkit \u5f02\u6b65\u64cd\u4f5c\u5de5\u5177\u6a21\u5757\u3001\u7ec4\u4ef6\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{}),"npm i -S @ekit/async\n")),Object(c.b)("h2",{id:"2-\u914d\u7f6e-async-\u7ec4\u4ef6"},"2. \u914d\u7f6e Async \u7ec4\u4ef6"),Object(c.b)("p",null,"\u5728\u6700\u9876\u5c42\u7ec4\u4ef6\u5185\u5f15\u5165 Async\uff0c\u76d1\u542c\u5e76\u5904\u7406 Async \u4e8b\u4ef6\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import Async from '@ekit/async';\n")),Object(c.b)("h2",{id:"--21-async-props"},"- 2.1 Async Props"),Object(c.b)("p",null,"Async \u7ec4\u4ef6 Props \u7c7b\u578b\u662f ",Object(c.b)("a",Object.assign({parentName:"p"},{href:"#asyncprops-%E6%8E%A5%E5%8F%A3"}),"AsyncProps"),"\u3002"),Object(c.b)("h3",{id:"asyncprops-\u63a5\u53e3"},"AsyncProps \u63a5\u53e3"),Object(c.b)("p",null,"AsyncProps \u63a5\u53e3\u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),Object(c.b)(o.d,{of:v,mdxType:"Props"}),Object(c.b)("h3",{id:"\u793a\u4f8b"},"\u793a\u4f8b"),Object(c.b)("p",null,"\u9996\u5148\u5728 ",Object(c.b)("a",Object.assign({parentName:"p"},{href:"http://git.corp.kuaishou.com/ks-ep/ks-ep-fe/ts-boilerplate/commit/1846c9df84a783b9ed043988e830f6e62376040f"}),"Root.tsx")," \u5185\u5f15\u5165 Async\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import React from 'react';\nimport { Spin, Modal, message } from 'antd';\nimport Async from '@ekit/async';\n\n// \u8bf7\u5728 Root.tsx \u5185\u6dfb\u52a0\n<Async\n  form={Form}\n  // loading={arg => <Spin spinning={arg.status.isFetch} />}\n  sharedLoading={Spin}\n  modal={Modal}\n  tips={({ type, message: msg }) => message[type](msg)}\n/>;\n")),Object(c.b)("h2",{id:"--21\u2460-async-form"},"- 2.1.\u2460. Async Form"),Object(c.b)("p",null,"\u8868\u5355\u7ec4\u4ef6\uff0c\u7528\u6765\u6e32\u67d3\u8868\u5355\uff0c\u5e76\u5728 Modal.onOk \u65f6\u63d0\u4ea4\u8868\u5355\u3002\u8868\u5355\u7ec4\u4ef6 Props \u7684\u7c7b\u578b\u662f ",Object(c.b)("a",Object.assign({parentName:"p"},{href:"#asyncformprops-%E6%8E%A5%E5%8F%A3"}),"AsyncFormProps"),"\uff0c\u5b9e\u73b0\u4e86 ",Object(c.b)("a",Object.assign({parentName:"p"},{href:"#asyncform-%E6%8E%A5%E5%8F%A3"}),"AsyncForm")," \u5b9a\u4e49\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"class Form extends React.Component<AsyncFormProps> implements AsyncForm {}\n")),Object(c.b)("h3",{id:"asyncformprops-\u63a5\u53e3"},"AsyncFormProps \u63a5\u53e3"),Object(c.b)("p",null,"AsyncFormProps \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),Object(c.b)(o.d,{of:Y,mdxType:"Props"}),Object(c.b)("h3",{id:"asyncform-\u63a5\u53e3"},"AsyncForm \u63a5\u53e3"),Object(c.b)("p",null,"AsyncForm \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),Object(c.b)(o.d,{of:J,mdxType:"Props"}),Object(c.b)("h3",{id:"\u793a\u4f8b-1"},"\u793a\u4f8b"),Object(c.b)("p",null,"\u5b9e\u73b0\u4e00\u4e2a FakeForm \u7ec4\u4ef6\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"export class FakeForm extends React.Component<AsyncFormProps> implements AsyncForm {\n  public static fakeData = {\n    name: 'skipper'\n  };\n  public constructor(props: AsyncFormProps) {\n    super(props);\n    if (props.getForm) {\n      props.getForm(this);\n    }\n  }\n  public submit() {\n    return FormFaker.fakeData;\n  }\n  public render() {\n    return <div>nihao</div>;\n  }\n}\n")),Object(c.b)("h2",{id:"--21\u2461-deprecated-loading"},"- 2.1.\u2461. ","[Deprecated]"," loading"),Object(c.b)("p",null,"\u3010\u5e9f\u5f03\uff0c\u7528 sharedLoading \u66ff\u4ee3\u3011\u663e\u793a\u52a0\u8f7d\u6548\u679c\u7684\u7ec4\u4ef6"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"  interface loading {\n    (arg: AsyncStatus) => any;\n  }\n")),Object(c.b)("h3",{id:"asyncstatus-\u63a5\u53e3"},"AsyncStatus \u63a5\u53e3"),Object(c.b)("p",null,"AsyncStatus \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),Object(c.b)(o.d,{of:U,mdxType:"Props"}),Object(c.b)("h3",{id:"\u793a\u4f8b\uff1a"},"\u793a\u4f8b\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"(arg: AsyncStatus) => <Spin spinning={arg.status.isFetch} />;\n")),Object(c.b)("h2",{id:"--21\u2462-sharedloading"},"- 2.1.\u2462. sharedLoading"),Object(c.b)("p",null,"\u914d\u7f6e\u6240\u6709 effect \u5171\u7528\u7684\u5168\u5c40\u52a0\u8f7d\u6548\u679c\u7ec4\u4ef6\u3002"),Object(c.b)("h5",{id:"\u793a\u4f8b-2"},"\u793a\u4f8b"),Object(c.b)("p",null,"\u7b80\u5355\u7684\u5168\u5c40\u52a0\u8f7d\u6548\u679c\u7ec4\u4ef6\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"() => 'loading';\n")),Object(c.b)("h2",{id:"--21\u2463-modal-\u5c5e\u6027"},"- 2.1.\u2463. modal \u5c5e\u6027"),Object(c.b)("p",null,"\u5f39\u7a97\u7ec4\u4ef6\uff0c\u53ef\u76f4\u63a5\u4f7f\u7528 Antd Modal \u6216\u81ea\u5b9a\u4e49\uff0cModal \u7ec4\u4ef6 Props \u7c7b\u578b\u4e3a ",Object(c.b)("a",Object.assign({parentName:"p"},{href:"#asyncmodalprops-%E6%8E%A5%E5%8F%A3"}),"AsyncModalProps"),"\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"class Modal extends React.Component<AsyncModalProps> {}\n")),Object(c.b)("h3",{id:"asyncmodalprops-\u63a5\u53e3"},"AsyncModalProps \u63a5\u53e3"),Object(c.b)("p",null,"AsyncModalProps \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),Object(c.b)(o.d,{of:H,mdxType:"Props"}),Object(c.b)("h3",{id:"\u793a\u4f8b-3"},"\u793a\u4f8b"),Object(c.b)("p",null,"\u5b9e\u73b0\u4e00\u4e2a FakeModal\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"export class FakeModal\uff1a extends React.Component<AsyncModalProps> {\n  public render() {\n    const { visible, title, content, className, confirmLoading, onOk, onCancel } = this.props;\n    return <div>{content}</div>;\n  }\n}\n")),Object(c.b)("h2",{id:"--21\u2464-tips"},"- 2.1.\u2464. tips"),Object(c.b)("p",null,"\u914d\u7f6e\u5168\u5c40\u7684\u6210\u529f\u3001\u9519\u8bef\u63d0\u793a\u51fd\u6570\uff0c\u8be5\u51fd\u6570\u63a5\u6536\u7684\u53c2\u6570\u7c7b\u578b\u4e3a ",Object(c.b)("a",Object.assign({parentName:"p"},{href:"#asyncresulteventtype-%E6%8E%A5%E5%8F%A3"}),"AsyncResultEventType"),"\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"interface tips {\n  (msg: AsyncResultEventType) => void;\n}\n")),Object(c.b)("h3",{id:"asyncresulteventtype-\u63a5\u53e3"},"AsyncResultEventType \u63a5\u53e3"),Object(c.b)("p",null,"AsyncResultEventType \u5305\u542b\u4ee5\u4e0b\u5c5e\u6027\u548c\u65b9\u6cd5\uff1a"),Object(c.b)(o.d,{of:L,mdxType:"Props"}),Object(c.b)("h3",{id:"\u793a\u4f8b-4"},"\u793a\u4f8b"),Object(c.b)("p",null,"\u5b9e\u73b0\u4e00\u4e2a message \u63d0\u793a\u51fd\u6570\uff1a"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"})," const message = { error: () => 0, success: () => 1 }\n ({ type, message: msg }: AsyncResultEventType) => message[type](msg);\n")),Object(c.b)("h2",{id:"3-api"},"3. API"),Object(c.b)("p",null,"Async \u4e5f\u63d0\u4f9b\u4e86\u70b9\u51fb\u53d6\u6d88\u6309\u94ae\u65f6\u5019\uff0c\u540c\u65f6\u53d6\u6d88\u5f02\u6b65\u8bf7\u6c42\u7684\u63a5\u53e3\u3002"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"import { doAsync, doAsyncConfirmed, useAsyncStatus } from '@ekit/async';\n")),Object(c.b)("h2",{id:"--31-doasync"},"- 3.1. doAsync"),Object(c.b)("p",null,"doAsync \u51fa\u53d1\u4e00\u4e2a\u53ef\u53d6\u6d88\u7684\u5f02\u6b65\u4e8b\u4ef6\u3002"),Object(c.b)("h2",{id:"--31\u2460-doasync-\u53c2\u6570"},"- 3.1.\u2460 doAsync \u53c2\u6570"),Object(c.b)("h3",{id:"iasyncactionprops-\u63a5\u53e3"},"IAsyncActionProps \u63a5\u53e3"),Object(c.b)(o.d,{of:V,mdxType:"Props"}),Object(c.b)("h3",{id:"\u793a\u4f8b-5"},"\u793a\u4f8b"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"doAsync(<IAsyncActionProps<any>>{ ... })\n")),Object(c.b)("h3",{id:"\u53d6\u6d88\u793a\u4f8b"},"\u53d6\u6d88\u793a\u4f8b"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"import { promiseFactory } from '@ekit/ajax';\n\nconst [{ resolve }, cancel] = promiseFactory<string>();\nconst res = yield doAsync({\n  fetch: naotu.doModifyDoc,\n  ...,\n  paramsGenerator: ({ extraParams }) => [\n    {\n      doc: {\n        ...extraParams\n      }\n    },\n    {\n      cancel\n    }\n  ],\n  onCancel: () => {\n    resolve('\u653e\u5f03\u4e86');\n  },\n  ...\n});\n")),Object(c.b)("h2",{id:"--32-doasyncconfirmed"},"- 3.2. doAsyncConfirmed"),Object(c.b)("h2",{id:"--32\u2460-doasyncconfirmed-\u53c2\u6570"},"- 3.2.\u2460 doAsyncConfirmed \u53c2\u6570"),Object(c.b)("h3",{id:"iasyncconfirmedparams-\u63a5\u53e3"},"IAsyncConfirmedParams \u63a5\u53e3"),Object(c.b)(o.d,{of:W,mdxType:"Props"}),Object(c.b)("h3",{id:"\u793a\u4f8b-6"},"\u793a\u4f8b"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-ts"}),"doAsyncConfirmed(<IAsyncConfirmedParams<any>>{ ... })\n")),Object(c.b)("h2",{id:"--33-useasyncstatus"},"- 3.3. useAsyncStatus"),Object(c.b)("p",null,"\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 @ekit/async \u63d0\u4f9b\u7684 useAsyncStatus Hooks\uff0c\u5b9a\u5236\u7ec4\u4ef6\u5c40\u90e8\u7684 loading \u6548\u679c\u3002\u9700\u8981\u518d\u5bb9\u5668\u5185\u5c40\u90e8\u663e\u793a loading \u6548\u679c\u7684\uff0c\u8bf7\u52ff\u7ed9\u5bf9\u5e94\u7684 Model Effect \u6dfb\u52a0 loading \u914d\u7f6e\uff0c\u5426\u5219\u4e5f\u4f1a\u663e\u793a\u5168\u5c40 loading \u6548\u679c\u3002"),Object(c.b)("h3",{id:"\u793a\u4f8b-7"},"\u793a\u4f8b"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import { useAsyncStatus } from '@ekit/async';\n\nconst Cp = () => {\n  const [status] = useAsyncStatus(\n    (status: AsyncStatus) => status.effectName === 'docModel/getDocList'\n  );\n\n  return status ? 'loading' : null;\n};\n")),Object(c.b)("h2",{id:"4-demo"},"4. Demo"),Object(c.b)(o.c,{__position:8,__code:"<Example />",__scope:{props:this?this.props:n,Props:o.d,Playground:o.c,Async:v,Example:Q,StatusFaker:U,FormCoreFaker:J,ModalFaker:H,FormFaker:Y,ResultTypeFaker:L,AsyncFaker:V,AsyncConfirmedFaker:W},__codesandbox:"N4IgZglgNgpgziAXKCA7AJjAHgOgBYAuAtlEqAMYD2qBMNSIAPOhAG4AEE6AvADogAnSpQL8AfIwD0LVmJABfADQg0mXACsEyEFRp0CDSQCojvVO3YAVPBDjsAwpUwBlAIYYARpSzs8rux4wdOyuAK4ElESuBBDkrlBQAJ7sAOZ0MALRMOjsoXBoKWYWAAZUmHDu6F5YGcU47ACSYOyJlKEA5AIw7OShAhBtdniUAO7sBH4Evq4ADjPp6IotbT3uRT14MOQA1uxtU20C7OiU5EMZMIi-BAQzcIiSkikQE6EeOFREkmXwldXfTl-nm8GTM6yay1C7Gw836dHI3XcyTgBAEoRSKVgdhGLzw4xsdgqwKwSxmsH83UytkR5lscFCMHW1FSuLe9UQAEozEZJGYIEQZpQBFMAEowVzkKZgIREdidcWS9oAbj5AqFooVBAAIgB5ACy7GlkTlXQlBAAtCciMrVYLhQ5IoLUPpDTK5ThJNhXALYDbUGYxWbdXqcF0MBkABTrZhsMTrCyMPAAZjEjjVzponDVwuy7BxEx6gKJVRBAkQUmTcfMFnYjBmYgjDSmUWSztzrnQLBi1Hi7BmQju40oqRgUxe7DDmH6qBSeZgCQ5Unr8draadLskVYT0ljijMJ16RH0ODSBAAorAjzQAEKJBroCOdYQEdpc1AcpUKZRen0wHCaMgdGoWh6EQFRsymYB2AABQHOAlmgqBXESFIhFCDB2HkV1jXaA8AC8_X5O0pgAQTgRJUHIbDZXaD04AEchJDIijyBwAg4CwQiIPYM8sG9MkYCWKDnAIaI8gAMVcbYMiWcShSIRwukk6SBCWPUnHiZSZPYOSBCILTVPYMV6SgAhLESeYDKWZjKKs9gbPIRxUEgPTsgMzDqPdSQAH1vNoFE4F8yReP42A2I4rjiKMzVPPlM12jBSjqBRY5TjwkTEixdhuHYYB1iiARnlQK52gABnYJMZk4vdqxmDsWBnEqABYqvYAA2Kr2hqiwwGAySiGgRISv4ZxDgRB1MBgoR-CWIhqEoOA6oRLr1l6mhnAgPDLnYABGJqavkRLdBSki5my9gIyg8gbCgdAw0wjlsrEC7oxkdgUUymBuGAfCMqxeQtxrYBrugO7ggAMnB8YLJgShmhB277u4ZG5TAdDJQGVB2nYAB-DZQbDCNHquBGwdQQ7qykGQqzfMwYXVY4YDAMJTIux7uGeqNKdO5dqwTQNJRwcTMhSK8CEBmtaxC392E3FcpAFgghZFsXAakHmabML8QHoxiHPCrBAN0ECDDA4xTHMIx2AAATCCYhSuRJ3BSABHCB3HUdCiit63IFgK5AAtFQABHUACVNABzzQBO7UACzVvZtrUsiuAAmUqdoATnNHadoz1PdraxA9vzxPY-tgAZfxzy7IV7haZ23Y9r3LZtsuUTPLtLH5bbk7TjPE_NROk12gAORBk8QABWJNvd5VAiIZxWhNyOAYDPMAwC2AgljyGA9RgOaPKNGjTUVFUZ-4qCz1YfR7H0DJ97ddprZgbYXk9S-aEihmoK3hylgAVSXhyTlICziwgfLy39yKUQ_vaKCDkRJiXgvZSB5BdJEFgpQO41lkHqXQPEdBmCQjYMBFAO-OEPT-BYjg-c0DILrBIs4AAmgAOXsN5M84lxJnnsJYNhAA1M8TCeFMJInqM83UkEsRXmvSUF99DmXmOI-hzDWEijPM4X-JceFnn4YI7ywjRGKOQcZUIplZE0HkYJOhjCWHeWcJYEilhf7OG8vYAAEiRJhABxM8eiRFnjMKA--HpjrsT9HTLAUU0C0AEMzcaDl8F2DytWc28YraAAKlQAvvHh0ACN-gA3uUAAgMgB560AFRyTNpEEEAJ_agAUvUAAByxTw6AEQGVJNtMD9i2FkHIgBYOUABXGgAFYMAP7ygAKV1SdPCwUBKAdgKDjK4iscBrmoHImGjAoIogQVcOBokCB5EwmIE-FhzbsGDpknJBTAACRoASHMynr0AI6Kgy6nh3YDydYcA_BdHQCXCZDUUjTOimaOZjoFnmJhns2WJh2CAD4zQAXJ6AHslQAOvKDMAAvGkLACH8oAewNAAhboAX8VAAOpo80Z4wIB3B-RGbaDljGmLfmZGG7NnpIhBQc9gVCoCAE59QA6V55MADD_gAfRQju4AgOQmV4vyhpKAMzNT_PTIs-YjAHI4LwXBXZ6wDmoLyUK6svU9Jir-fMjMVLpUOVQQkxV5NEoHMAED6gBTa0ALMmsLo5qvpvaTAzMTFSnRt2cwDkIz9gwdXeJcFHpJIsCE3K7BxmTMauwD54aUizRFVcOVUAlgaqIFcVBSwYgEJea4N5UavlXGcCXDyOVvV3BPkqyQjQ9TQSuIADHlABoyusYNuhgFXH_jAQB1BgHnS3jvOaXNJZEyehdQNksJx0CnKgq4Xr_VDsYKg3KOBF0lrgFhOWfMHriIsAAbQALrrA_IlINyUphbpdgyBkSwzSYzgDu7tADkERmbRAFIB7_TJIrUitFgAQTUAGAu6wt5SPXhGQdHNcorkeJW6t7BLUcsAMeRgBmxWiuGI4R57boEJMMExORAghD7H0boaNKLur2M0ZdIQMKrNoDgcDFb4BQCiZaWwrgPCwHNM6LAFp6POj7F0NeAhzSLVNOgFcwa_AYFgEcHKGa7B4wjIunA2aUjVyRDS96o525Hn2MB1T0mFNzCSBGVAJjE0hEKnADkSxSrEwJaWlcEBmgRjE-gCTAaVwWDMQQa-egBA4GoBGJRNjVHqM0XwgRQi_FLCcy5kFFgKaSy6FsgQ5gQPPRHZLezF0osZFc-uyWHmvPRN86vfz1iVFqI0VonR4WDHTHE9lmLNY4uNZBUodgW7pM7tfeWw5Qd7LQQaOwQAMSohAxsldggBlI0AFgJ_6l6AclNpodaXCyoBSllyTw7oYKL7MhMNOR5DrOQXN88lKLGqaWxYDLEYCAw04OYK9yUcujprPdlb7Wbv-HeqiAoO6PjxCgIZ4zQk3OjquZKJh3ptrFAACTAAoZRJlOBUAQ8WhKGA8hJAw-u_MQhn3pwpHkMUTdT32DybqplT5wPYuvqe012LDX8s3x835gLrD2GcO4aF3R-ixG1ec_VlcCW-jJbO8Dhn3mitgBK8othHCuGVbC74mra3qfNfWK1rdL2b1dffewQAAxaAGlbdgZ6YAMnYIADeUG3VgA6vIDKWwPrrF4V3eLwpc2LsQ4pxLj3FeJ8dzpYxuGQq_VwHmAnWy3VlgFMXbBRHDoSmDlUqILg1_fOiHnAUQZjAco3kEX67g2wNK95BoWpY24KgAkpYthxKjmupXuACbK8YFiNEIUSxWC2AgCx7oUm0TdCwjlbPcAGuXdsAmx7o7BdJZerlmsjAE2U-e2AaJ9hxlL2-prnAJwV_igEAm2nxPgDybmmXhJ--nvSUSN9FnRetRn9He3_IXfvoP877AO_ksn16VzQUb6Vea94Hf3YAlgP2P3lR9XYEhnYFAPLzgg-GAn0EAKkATWAIsBV1i2hCgCXk4Acz_wIGunH3SxwKbziAiCOAAEIUZ0InU0BsgCCJ9RwhdbsWASChQGtYtgdLtv8Zw6D4sGCp9GAuDZwL8r9C9i8sJB9vpB9V1jUadgdo8ZxY8aAABqJQhrffSfcwIzBIFrFXDQ6fSWRgFA3KP7O_YAeQlIRQqYSAgtXGWsGwzcdgK4LQqAffKQQGV9CmbWXyfydiIKaWASA2I2eA0CEAYwaEOALjC0FgCoLvG2LHeAcgfoGYC0OjKJSQVASgc0XeZIxIc0QjUbS2aeWee0RWWKI-F8E-YoyCdgZwGYNANSEVJYa8cICIVAJYBoVAGYcIWaeACoNIUhGiPldAGhOUIYncFESQIYj4OAOAEY2BdQVwLAdBAaJeJYSwZ-AgEiBYrAcSN1TGUkGUakSSSUIUZIQJHCR-DYyY7YkYhyWKRdSQXWJiZBOYuhZBQ1OCQxFieBLZeCN4yhEVCvf42yeScRBoByEiAooE6scE5BIBCAVydAaCbNb0OAAJe4uiBiSYohTAKAOY1KH-AkuEztBEo8PbDEx4rE_EsleAF1DzCxAY90TExiEJWY8PHEDAUYHAXySwAAaQaB4ScR8T1B1C1DPBLm8hLh1E8W8RFF8nOmOkoDCnGRSHDwdSmHICQhmJ0nkncmwBAnQ1-UFh1X0BlXePkiNSzAEjFjsANXkntwsC6JY1iE-2iBdOZmknjlEnOiWyRyPBKjgGfjmAyASmrHkBBSdPoyohCTRBOIEGnR9QOxYg-J9ToPpFhATLuDQOwIumXRPFHFQR4J4x9XzIIFQSuwJGzKaya0jJdPpA8AGgIEHSWz0NQQMhwA9JgC9NcBa3WFrKoknEjDoL0JjFkBnj8EoCpljF7JNTfWDV227POgjC4CcNCCIECEMgwQIB-SuncARCgB-WWOpEYCRGenkA5HWW2KPKXhPNQESGelAxHUVOVMoBSEfDRFQBnhnGhBt0VBV2DW9VlBymdDGGvJgGAwEEQQEHUFzw_2PQJSPHWyXjMg7i0zt0gsukLEwCuFKh6JmNcDSBKkAHQEwARCNAAjFS6jHRMgICuCgi4A8nPKWB2lKhYuzMuy3IgKhi3N-0onnCLO4riF4qgDYk2FQAW0fIX01J3w01hnCCuw7gEGzKpzULV10L4PMEApPnDMSnVMZmdVZnyOI38NgGbPWD0P7Vn2pmBzNJYgX2TW-jbKkgyEAPMPX0KlnVqLQHejqM_J_1h0KhwEHxwFwOumkMAOgO-j3wX2k2-kwviLwr6O2iIDgBAVUyPHwrSDe3mB3QjGSpfTvzXSe0YGaJuGoAX2oBX1iG2FitguJyPRWxPSgi6DgCVMvkwgOMiFvWLUOKXmONIMSEYBRDxwbCUtHROE9XO2JzXjwLwCuAXOiFcCJzqriASA8AlG2BJmSiVL_BVKWuJ2gISVooXyexiAIH9jlHHNcEoBWhn2WuCJov0LquJ1HKMKetnw6K6KmEKreuepKtaOOp-oqqjOquADt0mp-rGsoAmoBohp6n_zms-W7L2thtHQOrgiOtupRtHWNn0BKkAAN5QAX00bqsafrTrzr2hE5QySa6rACUbzy2Csb5BaanrXrYbAAZXUAHVNQAMLkYbnrJA_rqBWa6qpzZBebUDkbicKq9z5wrhmrWrGRMbJYlBea6pMhkrPF0hMhSCp1aqIa9Ct0xaawdoJa6rwafrBL9yrhALDb2DFbR0d0GbZC7b6aF8mbgdWa2V9dABV6Osv5paMFuB3BlQA8EWgZuKv9rfTqqBqqpqsWwBvGuJOclJOyEul5umuugRo7CRt5pWqgDWp2E2pW22pwBVIBpdsxrdpn1Zs6TZUADI9cw7232gW1AIwoOkOmYMO5u8q1ASqnYWOiSu2hOlieExE1Ou2uGmazO9AbO8e1YVa9awulql8mNXm1QZvbW9gZwsu0a2LO_auqFBun2mfKQZu4AkW9wrSnSiJBmQyzGGozZCSJy-M5dJMyiH4nPXKCmXS2-5kVBRSGAAyTM31c0vSANL-6--0H-8wBNQBl-iReHQEmdYAcBqKKB6KaiixWB9G-B8gclY7KVGAMB8JVBvY5kA1J-udaEDjcdOwdYl4LYxY3YojTGBsOB2EliSE91BJOdMQIh9jEh5hshxOlyMkgySh_UmhqwDYhhnY0hluoBq4dhyiEesk5EtWuAHhvh7WJ4iBFicKIIvQEIlJRuW2cIYYMsGuGcOuVAT2SOn2P2baQAQc9zlhhKBtg4AOVAB36MAH-lIZYuL0zuFOdOUqdOZi3ORAJqYeHaSeEx5uCuF4KuR2Wud2GxhuR5JucuVuF4GSpOIJnuc0UqNqIeRAJMAAdhHlKanltE_kXhgHsD-3zt2HOMPk1HxJ7WIUZIfifhfmP2oUqLPnWDh3ICZTBI2SyC-JBL0gmZQQtM-PBAhKhLmerFPAcnvHRLAVomxIBNxLCX4YZiiQyFiW6DbQ7STtnBHUHIEEnVzOwbtL0gSVU1mUVnsBunQEvrfQOWcdcfca8d8cGXtQgddUEfMF0cogsqfRSFbXvWHpJMKHfCuC3SUfIB-JgC3XaCGfftmJ3XTRhjhkIW2fnAUwKJvQdNlgrWtgaCrSuGxWyUAG8fQAaPV0VABt10bXgq3Uo0EhG3dRJZynadxIjCGaZX_PgqGdQSyHWy3nqfnp2AsoTGgioYNLsB1EbMYCRc4cxm4dPKWHaGv2L3aDEFYZ20-SuGggvJgjjpn3zygMQfAJymQaTVmZ9SWClqEquCy3qaEqLW23Jw7AZuDV1a1HOhWeQXvCJgZsj0NHklfpmb0nYAAB9N7jM_X4KQKElzpk0EkF88YzbJYj8bXMEc6tS4Bwd_T2BigCANjzQhnzRoD2AYdcr827BIC0aSzNT_Bi2IdHo42E32h2gCcTaawcaaBC7gFQxx0Mhyyc3R15MM2lmUbTxrnmgB6Sbk103HbidmaqcB2LBqAdQNr8XKI2YLWUaI3WB4gGRlM7z12ntLtk0iy3qz2oAL3zpXARhXBxxk1Aq3hGyw3DbN2aw9DH2L3r3Gsy6F8rgW3bNI7R1LtU2kHJL4KoIXX9znXUA92vW4OfV13MO7hfMe7paSEcohmj3l2nrURkgp2LsHNkO-LSWIbX332Dh8OhLf3Z7_2GPxwwKFMEgIwDbZ6LAN8h7lGCPXdWFi942E2M4LNDb3WCPOLedYAPX9yiZeaw8y7VgZqLpCG6OnqIMThN6RAbAZwwOK712IMKWqXGURV0VABnRUAFvUzpQAWMVAB15V3e2EAHLjQANiUF8cO4A8P0OiPkESPUsAbyOdO6qI39TMg1HUSrgkQfTtLZ72K0Pth73icovXAYvkqX233xw3PWOIb2PcuphBOobhHk6HxKOawA3t2axScjWOxauLAMusu0S2Od7GsNProtO0vJY9PhwMiJgCgTOaaGa789Czb6ufXFgF8auF9IPq5fPgdEulaicNdiWlgIW91qxhWGrN6YARh1Xkorh4i8XNcfSVx5NNcichPyAraGuchSPeDEs7tiXN8yuWIBWQGohokvUHuOQqy1cQV9aOWFNkFMWlgQKjuVsHaAktYlAdYsTBXiF9HtAh3TZQiTBi47ZzGkmrGUnbHi4HGrhLUbVABCK3pf8YTnYC7lCazjTnCYLh2iLlicycrkgrx9dgJ7SZ9jiayZQtLeTmTgKd7lKlKd2jHnHkl7TiqY-atlSJoEYxiNgDiJhjgESMJRSIiLSIyKrZnFYw8EyB2FHHNHiKrZmIyGIyeVPiiigj1DWIKPaNOZEeyD1BSqaIpCOzgF_hiEwM6cuJfi3hreIXxLoc2O2KYcd_sm2KU_nEcEmmablAD4IGuMWND42J9-gDsET66auPiLZOqZgR4kpQK1vhz-T9fn0GpMLyCwq052qx5xpOovpJuxz-CWPQL7fV0oOZiVRxwfnRHWVXkkAAsIwAVWU8lABR_UAG8MwAPO1AAG53rMbMAE7TQAVZsOVF_xxV_AAAdMABX4wAPbUx_2AgP4B2AKlABDGMADQjQAUACppIhjzj-4BnpreLAN-Hq5NF1FNL3EhVM6V1gt1DOMgVwIat9ji5Xs4eXfQFrdmiRHN--jrQcIPzBSoIx-eSLfoAHpTQAIDGC7e0gkg5SAA3PUmyABx-MACn0Xv0ADAMYAAJ5QAEgJeSGfoAGj5NVBYCwF6RiUYAaNvOgTbOEf-YA6sP_wmCADccIA8jIkHebEN9m3mGAbKkbaksDkgAejNAAZCpQoE0DAo_h3i7w_IvA21dwPSjBSABwC0AAZGcoLJowAfkTzTUEwkBDaCrYgAUMUI4yg9HiYPFSKxzBmAJPEWxLbGCgBX2GcJYPYCAA7D0ABZ2oADfTA-p8gKAPJn-y2ERoIXUHCByQqAHwYAE6HQAN-KAQwAJDGgAOpSyBygtzsSiu5mZQB3_IdGBVvL3l42R_SgFwESFJDAAa8qAAI2wyFZCIhNHA8lOjyFKYChqmYoaeTKGsAKhbzJVGCiUGAAY7QDj2dAAcCropGh-KVwEvgyAr4FoHgi6G0K_5cDhBf_AARY2AEzgd0BQkQagAOSAAD00ABDytikACjBoACN9QANByHKffoAC8vGluwHND7dL4AgQAIgqlwnlACyijxEeIK2fDCREKhrl9AcACxOI2oYYBaG0jCPnIwfJSMXgmfTAjgA1qbFARNpUEesHEhmBnoEjCEW1m24WA8Yu6Moc6BeHrArgYfBEX52REAiUgQImgCCKWTiRjUZgA5IAFG5OpCcIuHXD9-gAGm8OR2KBll8IZg_CzwfwroBtH17tpURwI0EeJAVaSMw-MjSPu6lhEUjfeVI0cDSLpHsR0R1YTES3S3Q7Rb0OIw0lQSZg0EcgHAmAKSOrB4w1RWfJEZqOlH0jZRYgLdKVHxGOFnhGQcPAckADtwdUL5HFIThgo63qIPtA98YBTCA7vEhRLJUwRirOEeH0YYwj5RuIpFio1d4pVpBiA9gKyMAClxoADZTfkYACAE_5hENVqokfkoo-kOKIKCwAtRaIxkTIVBRWwphjaBputWJTNVyRGfdUY6IIBigXuFiHUGAANToRNGQ6X_skjBR1D2x1YZocSlWE-DAAmKmAB76PnE7tUAZ4AQEIAEDdj4AvY-Ef2ORFDihcI4sce8QnFMjlxAwq2IAAQjQAPlKm4vYKgGcChByACIGYgeOrj2jERp49ShePHGoBJxoGacfsjBTri0UHKQALKJgAO397xzMTAjAA5SABMJU6RIooJqKZQRkD3Fu9vkU6CMD2KTGUiBxZ4pLEBKvEgSbxQ6UwWaGcHacE2dEsHBYLvHsAnx0E-CYhPiBLw0JGEyFBxOwkRD6Qn43ovhOJRETDxJEk8aOHImoBKJyZa8bw1omOCzBgILtkaSVhODWJM4q2HKKLGAAsTWDHYoyxjw9gNP334PCKxcYuABrWdBa0hQxKSsclSuDRjDuyCVrqBOeg1j_hzonUc2JBQBsfkRmdcj6LYlj8uRlkwAHbGOEjjNFxsk_I_xGolEbSKbHSomR7o2HrpPYCABTc0AAJdnYLEzOgWhAg7wWxNBxTA_S3QCIRVPcE_IthqpcAeGLHDiC--GYkkoiU8lyiTRkI-htCOBbYjwRhpNybGPUY8McxVsOFIMhxTKD06s1HSD4PMLhxYJCEpCUvE6QhDo0ygteiwX3FapBY2klwWxPymFT3AxU-qV4MamzlmpUAw5m1IWZcM4ICYhUVCJTEDS0xw0mMR5JsnjSEBk0-FDNIiFzTU0PghNGyngnKCFuPySQSfjgg-CkBo_CGUDLgFwBDy2aGIPEBsqTM0ECqPYRBlH7FJSesKG6ZGL75jNfiH0pViqzVaLMfUjARUf1IKJiBtWc0_VhNPYDyDAAT7oBC7BHUskjEM0HxC2JU0-QYAGNrQABTqgAcyNAAMhHbS4A1eGagLLiE-D5BT4uWe-NEnfirgGg5WcLPhSABZlSqT5JAA5JqAAgy0ADhzmaMgDOh0ADSZQc1SdBLwfk4E-yKIS1DBS1yG5elOS0pZQZAAd_KABOU3n6ABpOTGEcot-gAQMjAAm_HFJAA6tqABW6xymAASJUAC1pjIM6QyC2UbE-QWDNZRyyE0Ss8UELOylecrOZeCFJCkACADIAAS0wAPOhgAQVtAA0F7KCX8ag7WbEKLnezIMVwQAFeB_gnaS3gEBsS-5gASTklpYcbacQUHkOC_kh0mAHjIrSAB8NMACw8iTNanjQkWKLUlhiwfrANviu83dHsIjYBtzoO0NUpAODTBsWI94JcqpgDYqFw8TaPmdkGRLTd7ApoUgudGem4iGZb0pmRZTJy7ZFGzvCrl1OZmrR_8PyfUbVVvb_46CgCz5B2X_zpt_8M5eqilCQ7bjdxreV8RrK_GIJc6jTayG7KuD0Uco98pQl6wQW-szK6lHTlN12xE4A2pCmbnnk7EF0LoxEpKWRMAkwxRxwEryeFxzIRgyCzVOApgDS7Jc8FvRXrrgo_H4LJJ5mddnfiwjzgsCZtZLjuL3GyLqAWioUIoo64qKOCDmQhetTS6mKZWzVUavvmrJaVH5IrHEvOA6IvB3YUAFFsAvB6bJu828zxWsjxEBJ7Fe3XpoR0ZRj0LAVUlHAiBKgV8hmkgJlMTVdK0A4ujiqAM4oxluKvF4iN5B-IyDVwlsByXwYABLosYTLKmnKCLAt3eBMKCnQctL0BRckQUSxnItd5vDDxfvKyDHt6CL3IRRYHky1KF8O8vxaD0GW_E4ClEaILxwBpVdcJQofCauQSC1cRJ-CuZYmwWW80ruBRHANQtYV614Ajs7aM4Vq4hV5pa0yxLPU_xkkrgpykbsTk6zLc1CROA5IAGmvQAM7KpS-FOUqJIwsk6iJKpW_1qVctMYDS91E0sxatLGg5M7vCFxnwRtbAbk86KiAZDJs9uBeaXOJ37yArqAWyh7sipSggVMW50YZb4tGUZ4s8u83WjBwcxBUT5yMchW7NkVwqDu6bHifPIBpWsFuDre5nBC9aD4QOwafFbvOjYEq7WvNGZbvhSrzLE0vNJZWJIlWrKpVs9PpbvNq4bL3U2K6brVwdnJQDlgOVevLPhrjBe8tXC5dkBO694y6IHCDL7Ig5SCoYs7H1ADQW7ydDMB3TFunikE5QFuHXHqCjOdUCqEEHZX1TlHtVZlw8b1PQv6t-LKKF8ehXlct1Goj5i2B3NLpGryBbK8geAMJU9TFUrLDlANGVTMVzW6q7aqqzGOqsYUA0tVK2HVWsrtrHKzVF6Nlc_PQANqFaNNaxcDgm4L4lV4zAZcSryBOFXVu8-5SuGVrroDkU0wAMt-gAfXNPlt3UUS2ougAqXswKzGKCpaVmtN5XizpXBRRWzcSFnAHZcTgLX153eC-HNWesxpVql4stPZdqo6LQ8JatgaRTMSfX6rJ6kbBiDAGcAFl_8mLZbi-02XbKGaXazGj2toAS0RlA6xJX-Cg1-dslCIddQgl3QNgIwIeJYIPgpU3sqVu8nADSpRhcBZF6C2hPx3ejyLZVkLMjZrNPUpAOiIkIUGcpRoXrKNzGujaQUY2w1jlTXTgPXkaKG1r120ATWxoY1ktcg4Ya2dkF5oYq415y-CgJvOhCa3x7GiTlRX2UPqCiIHYjTxqOwLrzoz68jdqQoK8txNFozTcItsA6aMI3bC6Mcvk4aoEQP6ssn-t3nsAjNhoFlQDx6XE5E1lm9AERuxrwUfhOUfTdRtsLtAT12MEqGKr9Ak1g0TqFmAQHwl6a4AL6trtTVsKKL9l8nATenl6IEVGJPbG1E-KprU0p08myAjlvSqJUu2hW2FIAEZNQAKSxMWrGk2jyARAiASW4LSloM0yYqNyy7MVcGY1mbd1KUFEAxs608bUtthE9fhOE1dAvRrGpTQxuG01hLsvQMbR1uzFubTl8nMbV0CS3baPNXmt6hGzyr7StJakyaDlHW3takt1mvbdvGzHWb4tLqfCStsIIXRTuzQPKtlBRjtAoGr4Y7T9R-2eqUqmW7Vd6qer_tsNF0PKv5rup7dSURiWkhSgIY-lNsnLKrflog7ZiVu6W4vlfEZw4BncTZa_LXxCzaIFcfuaEJDppo21MIf7KTavRwK8ay88Oo3Oej_BdEXkWalGuBryDcaLArc86iFvwW_bg1LK2woiu6BXKWVguyIRV1l3IT5d9a9zchL_a06GdztDAuot5pp5udmazDSB2Zp6EQ8yipYLujfA04Hl4GMFIAFA7H9JzPs7ooy5vYCIRUsoDb5s0CaGpV4s3WQqd1AHOhZN0XT9LMacGzwVkDB7tLRlfsX7hGEw1Dogqwu7oIduQlW7R0eO22rFnEQVS8lK4W7gi2BzEc0G38w0r_NkYDTZWo6KCAQGgjhBMIVwa8J71_LsRKRkG-pVYEaXKsXgqrB6RqyelMjtWAbfVkYXMWIdrWsM8AhipezlrPk67JtOSHWx2469clYJUS25bvcvdu-EVB1w45TBV9TZdfaVzGbCggcdtZhXKBH23ZMVqAOfR2FsKz7tlaLEfbeiuBXzKIobaTnWtZ3xBW1A7UtViu2UAHF0DbKfUSgUyzCBA8wpeLzWzb06FuGNdLTMOXyr5toYNenZLChmQHUDCw-TtgZQNzC0DBXfHVJWzQkGSa0O0DqRv_ZXArZFojPTTmsV7Uza-QWAMO0NUMhluK4bFgXo-7KNm1RemfMRzL29Tkxle_-Qvlr316pg-2dgM3tmyt7ve6ojve6lXXUA-95XTqT9KZFj7A9I2qYNsoVLNrX5u2d-eKFIICsgN_3ddvvvGAyGwDhLE_VobJJ_LSQNhhfBG2IkuynsVrZybZM1qDz3D6jJYC1xslJp_8m3dhdsGIVorA2GK4DdFQEAUcAaEGEMfS1_RNqglGQNIEiRskFCiROUQ-QDUuxfbts6jOyRkEHni7UYcjQHVV0vmBHaAeR9RudH8OVGHJ8ZJ_R4dnoQYFeURJjF3jYz6lzQXGboG0j4wCY2kHYXmohVyOtd01LyPTGSESDV63qcxl-eEcNoAjMgiQYKnAB2PIQIwaQeyR0la6PQ8YJxqo80da5eit0VxrWpsfUaei3qkO1RchKB1abbArXQ48kHIW7jkI-x34393Uaa7g0FmuKZl3UYHGATfx-yLCaBOwmSUkJ842ZogydIKkNLQANvxssjYxykABBmuckjnM6bNcAH47Cfk4QnUQUJ1EjCd2Ps7g0IOstoAGV9Q0MgsACnRuciMmcirhl6ILgcJX6izfBv6LxuLPKOokOj1Rqwb-mKAraJgQgMYHovjJw6zN7xrApdjILfGbJvx-TpqbgC8RqTsEWk78fZ0QZWRUBHI90EoAeB1A68Q2hsZaOolFjeAZYwZgdOtcLd9OkE6iXk5lH_DNR9oNadtN_kJOXpsI60cgJlHwzPp2lXKCDPrxXwmB2wlBHq4hGSci6aM9lyoOSxBtKJmySpv8OG01ObHHXd0ETXkndjKmqk9F2hMmnPjNYPo9r0V7RFmMrGdjJxhoI8YmYGQKY0JntOWnHTyVZ066dWPunwjPGis8hFsL-nczhpmyZruZom6T-RHYrmyZmrv9cthUJ46iUMVdc8QJKXcbIuaoXdZN2FXaCxVKiJxauWOwitCF3G5aMqbaqHdGsxprbojsiixdsAMUvm6qEGSwKKR1BXADhhs9OTIMKWAAuOSfGAB8f6gsIc9uou3oudDIKKLst8AcRYQwX3wUyQR4ggKROpF-SGR0qMo8fre7zqMAboj0Sebepzcf9qWgdgJtvVpaN2ZnCtNavYD4mw4njQAEI2gAaojVgQlNCYAC59TznUIXyXYxFPwGozI1j5QB4-2nKdmSH2MKzuuEu5CSB0UsIXtSxm6gjbJ_PE47Dh-xw8JWcOSIMApIKAMweBysHoAuNTg0-aVo8Gbu_BxyARyENPZiOcVGQ43vkMt7ykyhrPnUrUNd6QVIUjcspKe6joDLDhki5vrIuLAgdl-7oxqvzU9aVl1yiupZZnwrIbLHB6XVrslieiKY5dK1ZZwZbdJAAP9qABxBMAAMSoAG2belp0gJr9IuaHKafoAGkjQAJmKDLNedALJkpLoeiSdYIXtrDdShpYhpUTCL-7TcrgPeggJoY4a0y7gPDYfW7P1a3jqwt3TMYutENJiJrVe7ZW0oEM_LVGOh8K7Sm4Ee7AErli6JftCvZYpx3AimDdOTwpKZrKrYi8Qm1aa42ZUMEdJrjeu96PruJDfdeiWAX48WMM-cANeehQxIbUAAa1pXOjBKcc04m6T8LhsMkpMuLZoMj1xInxtGWJVkqjwoD3VDAWPExjjwdiWMue9cOxjbGJ4HtyAgADj1AA84lU8klNPPJiEwzg7RdoO0RAJeZKZtRi4fPdntXCdj49abIttntkw7i5Nhel5gpuLx2iS8moTUEpjtFl6F9qi1-NnHLnr6K4zwOOEiGeCNvl9umKfYJXkTNCnFqSKShkm3y2YIMdm58qKP60Lx62OclOrnH4nOgm2zwJ8bvuvO6AOQdNJ2G7COniJXBwbzQDGzDDRbfWspjpB7rsKal7N7Q7t6XOTvlw-3RE50HVjX3KwU6qshtv0EHd6txJkdzfcO9jj-nNIppaKbq3zAiFR25Q0WsoeFp63NbjGNYf6YihRSooRk-UPLbeeYkEAGJeMsFJakXmAB0JQtyABouVyRCiM78Fa_O7kcTOI3EHibxIbfztr37EG9r3Nvd9x-I_QBNxiKoGwDE2gIhjDHj3fsY2WrggAU91AA7oo4pAApoqABj5Wx5mMqbEtmm6kzpvWwAmuTbuMzwzji9R4O0POEmCajS2W4YtzntY0J6s8EHstwXnk3Af9xdoqcQuBE1Tha2beNTJKf7wtuSB8--JR3GX1igV9rRVffprb12uMziM5tq4q4BuIMOamcdrbDTMelOsIVLh7c1mfuJO3hmIfTh0X11uy4vbJd6naHdb0t9scjt1krcSC4bMPQDkXZrpStjqPRH8SwO5AJ0dBIAQDVTvto5EeaODHUUIx2QkkCgtmlCCMu5AJe2swHI4eH4bd0xs4MmUFiBO8S3aA7o0Wt3AJyfA8fOWaRXj7hfhdSkyilknjmGBRaylmA0GIwTIMGWfop2vllECJzDE24eAp0qbTJ7dxyfzBVh4-ACm6GApMqwKEFKCjBUD1WtPzqHGS1QpxUiYPAvOurkuge57VmhOtfQzWGaHydmhFBifOoFGc57gcn5xiwM6o4XRPzH56I9-ddoxq4AyzmfDYqDwq4IMXlOIFgTxbowwgKQQgHeb3F9kZQIlOgNXrtx5r10Nz4zPumB50LNKadg5DLMjlQoAhbKfJIAHvlKwXBLH4NIyl1vXSnFuctXAdrFe5USwwAWZPZr817J4tY0ZD6r9q1mmCpOHHNi2jnSvQqk9mAZkZg7h6bg0_gpI7JECjmu94smqt3cIzlhJZLG2Wjr6cJfInSTtE4y52cOdhvqEa2c445JoIv02i1Zk7pjUiXFkWCnYDvLyx08UF_BU2uCGRrlMph3_JVGwvprAj75S70HPIv0XoGfl1i-LQ4u6FeL9J16iJe7YSXiO6NmHbR0iqZ8NL-V8deyD0uawB171rtiZcrgqHPmNl1I85cG3qdGF1Sny94VEXsbfYIV__gCeivfR9un9BYBBcXy5XnupfUoJygpZus_RpXq2ZgDDGOMoxzs9bHz4a9kiWRJsyn2Oi2ATYpvGGObyXjChr06wb18Tp_Z-v9b3t7l7WHkflJFHMAMQEtgdcpud8CaEreXXPt2PoWb9XDexAMYmwybFsdJqY3tgWN_7yDnnvTcfvsBAA2t6ABIBMABfipHPRQErXEwgdxuzcCZgPSofcJqLtCTDjxE4JTFnou9FsJMOe1Ntd0A5fcC8L3oTUXkUx2jDwymETGJmqiqIhprc5STeEvC3k59yilDll95lIdXE6H78CRzrf7XZ8RHuNvptrZDT72Pcm973Dve5ydN2-pjrR5APRsYef1sAOMkuUHxCryVQ6HWZ3KOjwVB8JcKtzR_XhU2LKDHnBpi13TiIl4tH0gtDOo_zgePQ898EOnJnbIE29Bm2fR93mceUQGGyT3GVqqxqVPVbjsqoAT0uaIrl2IKscqLKXYE9Gnz-ZARE9SeDPCCTzdZrII2fNPXm7TwgjG6jqBc6lHQnYtNRgpd3B7iOUe5c2JuBGBRWpnJ7WfOexPjHhBNx808ItIvOMW9E-TZaD51PBATFl1VqYoskNvxEaiCgg-24KVomSoBJiXKpq4Aqnh6pF8t0DP-VQ6hBISp08oh4vlhyr9V_U-iehQCahzJV9c0oxE9rB0cJixdUjBMWHa9dFnoJ00BS-TOMSvh8Ptb2fchtyLGV_5zrpzKWGmb55iJ1wxJci3z3Mt-I8RYFOG3pWi1gt3RecFg-YsxYBB67yspnhBHktG2D5b_wLVVALO_0AMAR0_AKqfwCuD8AfgxYaoD2Z_ACQZo6wfgC8PyBlUkA7AfgKVBwDI_SoUP6sPwHKAlv3UgPxHyABIjvQiIKvCHyr1aTjJEguYPIAUDHRmhzQIPv4KWHR8WB-AUQNALj_4CX2NAaJEAOIkx8wB5g4YSiBAHgC4-ls_AGJdsXZ8gAAAeqj5wCTwefK4cX2Q6D7BKpfsvlHzgCLiK_10yvvPmr3V9y_tfROfgOUSl9IQfCTPmsKb81CWhIg5vrICiH4Bq4Ak2jBn7gAhYffqA33kInlBAC0AfQWQQH8D4_m5vyiVbOYPwHkAKAmaQAA",mdxType:"Playground"},Object(c.b)(Q,{mdxType:"Example"})),Object(c.b)("h3",{id:"demo-\u6e90\u7801"},"Demo \u6e90\u7801"),Object(c.b)("pre",null,Object(c.b)("code",Object.assign({parentName:"pre"},{className:"language-tsx"}),"import React from 'react';\nimport { Spin, Modal, Button, Input, message } from 'antd';\nimport { AjaxPromise, TkitAjaxFunction } from '@ekit/ajax';\nimport { AsyncResultEventType, doAsync, doAsyncConfirmed, Async } from '@ekit/async';\n\n// @IMP: \u8868\u5355\u7ec4\u4ef6\nexport class FormFaker extends React.Component<AsyncFormProps> {\n  public static fakeData = {\n    name: 'skipper'\n  };\n  public constructor(props: AsyncFormProps) {\n    super(props);\n    if (props.getForm) {\n      props.getForm(this);\n    }\n  }\n  public submit() {\n    return FormFaker.fakeData;\n  }\n  public render() {\n    return <div>nihao</div>;\n  }\n}\n\nconst loadData = (id: number): AjaxPromise<any> => {\n  console.log('running effect');\n  return new Promise((rs, rj) => {\n    setTimeout(() => rs({ code: 0, message: '\u9017\u6211\u5462', result: { id } }), 1000);\n  });\n};\n\nexport default function Example() {\n  return (\n    <div>\n      <Async\n        form={FormFaker}\n        loading={(arg) => <Spin spinning={arg.status.isFetch} />}\n        modal={Modal}\n        tips={({ type, message: msg }) => message[type](msg)}\n      />\n      <Button\n        onClick={() => {\n          doAsync({\n            fetch: loadData,\n            callback: console.log,\n            modalProps: {\n              title: 'nihao',\n              content: (\n                <div>\n                  <Input />\n                  <Button\n                    onClick={() => {\n                      doAsync({\n                        fetch: loadData,\n                        modalProps: {\n                          content: '\u4f60\u597d',\n                          title: '2'\n                        }\n                      });\n                    }}\n                  >\n                    \u5d4c\u5957\u4e86\n                  </Button>\n                </div>\n              )\n            }\n          });\n        }}\n      >\n        \u5f39\u7a97\u6d4b\u8bd5\n      </Button>\n      &nbsp;\n      <Button\n        onClick={() => {\n          doAsyncConfirmed({\n            fetch: loadData,\n            callback: console.log\n          });\n        }}\n      >\n        \u4e0d\u5f39\u7a97\u5e26loading\u6d4b\u8bd5\n      </Button>\n      &nbsp;\n      <Button\n        onClick={() => {\n          doAsyncConfirmed({\n            fetch: loadData,\n            callback: console.log,\n            indicator: null\n          });\n        }}\n      >\n        \u4e0d\u663e\u793aloading\u6d4b\u8bd5\n      </Button>\n    </div>\n  );\n}\n")))}X&&X===Object(X)&&Object.isExtensible(X)&&Object.defineProperty(X,"__filemeta",{enumerable:!0,configurable:!0,value:{name:"MDXContent",filename:"packages/async/README.mdx"}}),X.isMDXComponent=!0},"./packages/event-center/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js").__importDefault(n("./packages/event-center/node_modules/eventemitter3/index.js"));t.default=new a.default},"./packages/event/lib/EventWrapper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventWrapper=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importDefault(n("./node_modules/react/index.js")),r=n("./packages/event/lib/event.js"),c=function(e){function t(t){var n=e.call(this,t)||this;return n.observerList=[],n.on=function(e,t){r.EventCenter.on(e,t);var a=function(){return r.EventCenter.removeListener(e,t)};return n.observerList.push(a),a},n.once=function(e,t){r.EventCenter.once(e,t);var a=function(){return r.EventCenter.removeListener(e,t)};return n.observerList.push(a),a},n.emit=function(e,t){r.EventCenter.emit(e,t)},n}return a.__extends(t,e),t.prototype.componentWillUnmount=function(){this.observerList.forEach((function(e){return e()}))},t.prototype.render=function(){var e=this.props,t=e.Cp,n=e.originProps;return s.default.createElement(t,a.__assign({},n,{on:this.on,once:this.once,emit:this.emit}))},t}(s.default.PureComponent);t.EventWrapper=c,t.default=function(e){return function(t){return s.default.createElement(c,{Cp:e,originProps:t})}}},"./packages/event/lib/event.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./packages/event-center/lib/index.js");Object.defineProperty(t,"EventCenter",{enumerable:!0,get:function(){return a.default}})},"./packages/event/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importDefault(n("./packages/event/lib/EventWrapper.js"));a.__exportStar(n("./packages/event/lib/EventWrapper.js"),t),a.__exportStar(n("./packages/event/lib/event.js"),t);var r=n("./packages/event/lib/useEvent.js");Object.defineProperty(t,"useEvent",{enumerable:!0,get:function(){return r.useEvent}}),t.default=s.default},"./packages/event/lib/useEvent.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useEvent=void 0;var a=n("./node_modules/react/index.js"),s=n("./packages/event/lib/event.js");t.useEvent=function(e,t,n){void 0===n&&(n=!1);var r=n?"once":"on",c=a.useCallback((function(){s.EventCenter.off(e,t)}),[e,t]);return a.useEffect((function(){return s.EventCenter[r](e,t),c}),[e,t,r,c]),a.useMemo((function(){return[function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];s.EventCenter.emit.apply(s.EventCenter,[e].concat(t))},c]}),[e,c])}},"./packages/model-factory/lib/consts.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printError=t.fakeUtilsThrowErrorIfInvoked=t.noop=t.markSubEffect=t.TKIT_GET_STATE=t.TKIT_DISPATCH=t.TKIT_SUB_EFFECT=t.TKIT_NB_EFFECT=t.TKIT_EFFECT=t.EFFECTS_PROMISE_REJECT=t.EFFECTS_PROMISE_RESOLVE=t.fakeEffectRes=t.EFFECTS_MSG=t.EFFECTS_SUCCESS=t.EFFECTS_ERROR=t.EFFECTS_END=t.EFFECTS_START=t.ASYNC_EFFECT_EVENT_NAME=t.defaultEffectOptions=void 0,t.defaultEffectOptions={type:"takeEvery",ms:100},t.ASYNC_EFFECT_EVENT_NAME="ASYNC_EFFECT_EVENT_NAME",t.EFFECTS_START="EFFECTS_START",t.EFFECTS_END="EFFECTS_END",t.EFFECTS_ERROR="EFFECTS_ERROR",t.EFFECTS_SUCCESS="EFFECTS_SUCCESS",t.EFFECTS_MSG="EFFECTS_MSG",t.fakeEffectRes={code:0},t.EFFECTS_PROMISE_RESOLVE="__EFFECTS_PROMISE_RESOLVE__",t.EFFECTS_PROMISE_REJECT="__EFFECTS_PROMISE_REJECT__",t.TKIT_EFFECT="__TKIT_EFFECT__",t.TKIT_NB_EFFECT="__TKIT_NB_EFFECT__",t.TKIT_SUB_EFFECT="__TKIT_SUB_EFFECT__",t.TKIT_DISPATCH="__TKIT_DISPATCH__",t.TKIT_GET_STATE="__TKIT_GET_STATE__",t.markSubEffect=function(e){e[t.TKIT_SUB_EFFECT]=!0},t.noop=function(){},t.fakeUtilsThrowErrorIfInvoked=function(){throw"Fake Utils mustn't be Invoked"},t.printError=function(e){"function"===typeof console.error&&console.error(e)}},"./packages/model-factory/lib/factory.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js"),s=n("./packages/model-factory/node_modules/immer/dist/immer.esm.js"),r=n("./packages/actions/lib/actions.js"),c=n("./packages/model-factory/lib/consts.js");t.default=function(e){var t=e.namespace,n=e.state,o=e.reducers,i=e.effects,l=e.m,u=e.effectFactory,d={},p={},A=Object.keys(o).reduce((function(e,n){var c=p[n]=t+"/"+n;return d[c]=0===l?function(e,r){var c;return a.__assign(a.__assign({},e),((c={})[t]=s.produce(e[t],(function(e){return o[n](e,r)})),c))}:1===l?function(e,t){return s.produce(e,(function(e){return o[n](e,t)}))}:o[n],e[n]=function(e){return r.createAction(c,e)},e}),{});return i&&(A=Object.keys(i).reduce((function(e,n){var s=p[n]=t+"/"+n;if(n in e)console.error("[Critical Error]: action '"+n+"' already exists!!");else{e[n]=function(e){return r.createAction(s,e)};var o=i[n],l=c.defaultEffectOptions;Array.isArray(o)&&(l=a.__assign(a.__assign({},c.defaultEffectOptions),o[1]),o=o[0]),u&&u(o,s,l)}return e}),A)),{state:n,actions:A,reducers:r.handleActions(d,n),TYPES:p,effects:a.__assign({},i),namespace:t,__model:e}}},"./packages/model-factory/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js");a.__exportStar(n("./packages/model-factory/lib/types/index.js"),t),a.__exportStar(n("./packages/model-factory/lib/consts.js"),t),a.__exportStar(n("./packages/model-factory/lib/utils/index.js"),t),a.__exportStar(n("./packages/model-factory/lib/factory.js"),t);var s=n("./packages/model-factory/lib/factory.js");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}})},"./packages/model-factory/lib/types/action.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./packages/model-factory/lib/types/async.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./packages/model-factory/lib/types/effectUtils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./packages/model-factory/lib/types/effects/call.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./packages/model-factory/lib/types/effects/put.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./packages/model-factory/lib/types/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js");a.__exportStar(n("./packages/model-factory/lib/types/action.js"),t),a.__exportStar(n("./packages/model-factory/lib/types/effects/put.js"),t),a.__exportStar(n("./packages/model-factory/lib/types/effects/call.js"),t),a.__exportStar(n("./packages/model-factory/lib/types/model/reducer.js"),t),a.__exportStar(n("./packages/model-factory/lib/types/model/effects.js"),t),a.__exportStar(n("./packages/model-factory/lib/types/effectUtils.js"),t),a.__exportStar(n("./packages/model-factory/lib/types/async.js"),t)},"./packages/model-factory/lib/types/model/effects.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./packages/model-factory/lib/types/model/reducer.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"./packages/model-factory/lib/utils/async.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FakeEffectFactory=void 0;var a=n("./node_modules/tslib/tslib.es6.js").__importDefault(n("./packages/event-center/lib/index.js")),s=n("./packages/model-factory/lib/consts.js");t.FakeEffectFactory=function(e){var t=e.effectName,n=e.silent,r=e.loading,c=function(){return 0},o={code:0,message:!1},i=function(){return"object"!==typeof o.message&&o.message},l=c;return!0!==n&&(l=function(){o.code=0,o.message=!1;var e=new Promise((function(e){c=function(t){return e(t||s.fakeEffectRes)}})),n={fetch:function(){return e},errorMsg:i,successMsg:i,effectName:t,indicator:!1===r?r:void 0,channel:"@ekit/model/effect"};a.default.emit(s.ASYNC_EFFECT_EVENT_NAME,{type:"doAsyncConfirmed",payload:n})}),{getRes:function(){return o},getResolver:function(){return c},getEffect:function(){return l}}}},"./packages/model-factory/lib/utils/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js");a.__exportStar(n("./packages/model-factory/lib/utils/putWrapper.js"),t),a.__exportStar(n("./packages/model-factory/lib/utils/async.js"),t)},"./packages/model-factory/lib/utils/putWrapper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.putWrapper=void 0,t.putWrapper=function(e){return function(t){for(var n=[],a=1;a<arguments.length;a++)n[a-1]=arguments[a];return"function"===typeof t?e(t.apply(void 0,n)):"string"===typeof t?e({type:t,payload:n[1]}):"object"===typeof t?e(t):void 0}}},"./packages/model/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("./node_modules/tslib/tslib.es6.js").__exportStar(n("./packages/model-factory/lib/index.js"),t);var a=n("./packages/use-model/lib/index.js");Object.defineProperty(t,"M",{enumerable:!0,get:function(){return a.M}}),Object.defineProperty(t,"MM",{enumerable:!0,get:function(){return a.MM}}),Object.defineProperty(t,"useModel",{enumerable:!0,get:function(){return a.useModel}});var s=n("./packages/redux-model/lib/index.js");Object.defineProperty(t,"CM",{enumerable:!0,get:function(){return s.CM}});var r=n("./packages/redux-model/lib/index.js");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r.default}}),Object.defineProperty(t,"promiseMiddleware",{enumerable:!0,get:function(){return r.promiseMiddleware}})},"./packages/redux-model/lib/cm.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CM=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importDefault(n("./packages/redux-model/lib/createModel.js"));t.CM=function(e){return s.default(a.__assign(a.__assign({},e),{m:0}))}},"./packages/redux-model/lib/createModel.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tCall=t.tNBPut=t.tPut=t.globalPut=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=a.__importStar(n("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js")),r=a.__importStar(n("./packages/model-factory/lib/index.js")),c=n("./packages/redux-model/lib/effectWrapper.js"),o=s.all,i=s.call;function l(e){var t,n;return a.__generator(this,(function(a){switch(a.label){case 0:return e[r.TKIT_SUB_EFFECT]=!0,[4,s.put(e)];case 1:return(t=a.sent())&&"function"===typeof t.then?[4,t]:[3,3];case 2:return n=a.sent(),[3,4];case 3:n=t,a.label=4;case 4:return[2,n]}}))}t.globalPut=l;var u=r.putWrapper(l);t.tPut=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return u.apply(void 0,a.__spreadArrays([e],t))};var d=r.putWrapper((function(e){return e[r.TKIT_NB_EFFECT]=!0,s.put(e)}));function p(e){var n=e.namespace,i=[],l=a.__assign(a.__assign({},s),{namespace:n,tPut:t.tPut,tNBPut:t.tNBPut,tCall:t.tCall,asyncSelect:r.fakeUtilsThrowErrorIfInvoked,asyncPut:r.fakeUtilsThrowErrorIfInvoked,asyncNBPut:r.fakeUtilsThrowErrorIfInvoked});var u=a.__assign(a.__assign({},r.default(a.__assign(a.__assign({},e),{effectFactory:function(e,t,n){var a=c.effectWrapper(e,l,t,n);switch(n.type){case"throttle":i.push(s.throttle(n.ms||100,t,a));break;case"takeEvery":case"takeLatest":i.push(s[n.type](t,a))}}}))),{sagas:function(){return a.__generator(this,(function(e){switch(e.label){case 0:return[4,o(i)];case 1:return e.sent(),[2]}}))}}),d=e.effects,p=u.actions;return d&&Object.keys(d).forEach((function(e){var t=p[e];p[e]=function(){for(var e,n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];return a.__assign(a.__assign({},t.apply(void 0,n)),((e={})[r.TKIT_EFFECT]=!0,e))}})),u}t.tNBPut=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return d.apply(void 0,a.__spreadArrays([e],t))},t.tCall=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return i.apply(null,a.__spreadArrays([e],t))},t.default=p,p.ActionNameMap={}},"./packages/redux-model/lib/effectWrapper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.effectWrapper=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=n("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js"),r=n("./packages/model-factory/lib/index.js");t.effectWrapper=function(e,t,n,c){var o=t.tPut,i=c&&c.loading||!1,l=c&&c.silent;return function(c){var u,d,p,A,f,b,m,y,g,j,E,_,O;return a.__generator(this,(function(a){switch(a.label){case 0:return u=!c[r.TKIT_SUB_EFFECT],u?[4,o({type:r.EFFECTS_START,payload:{effectName:n}})]:[3,2];case 1:a.sent(),a.label=2;case 2:d=r.FakeEffectFactory({effectName:n,silent:l,loading:i}),p=d.getResolver,A=d.getRes,f=d.getEffect,u&&f()(),b=A(),a.label=3;case 3:return a.trys.push([3,9,15,19]),c[r.TKIT_DISPATCH]&&(t.asyncPut=r.putWrapper((function(e){return e[r.TKIT_SUB_EFFECT]=!0,c[r.TKIT_DISPATCH](e)})),m=function(e){return e[r.TKIT_NB_EFFECT]=!0,c[r.TKIT_DISPATCH](e)},t.asyncNBPut=r.putWrapper(m),t.asyncSelect=function(e){return e(c[r.TKIT_GET_STATE]())}),"function"!==typeof e?[3,8]:[4,e(t,c)];case 4:return y=a.sent(),c[r.TKIT_NB_EFFECT]?[3,8]:(g=b,y&&"function"===typeof y.then?[4,y]:[3,6]);case 5:return j=a.sent(),[3,7];case 6:j=y,a.label=7;case 7:g.message=j,a.label=8;case 8:return[3,19];case 9:E=a.sent(),b.code=10100,b.message=E&&E.message?E.message:E,a.label=10;case 10:return a.trys.push([10,13,,14]),u?[4,o({type:r.EFFECTS_ERROR,payload:{effectName:n,error:E}})]:[3,12];case 11:a.sent(),a.label=12;case 12:return[3,14];case 13:return _=a.sent(),r.printError("EFFECTS_ERROR: "+n+" "+(_&&_.message||_)),[3,14];case 14:return[3,19];case 15:return[4,s.cancelled()];case 16:return O=a.sent(),u?[4,o({type:r.EFFECTS_END,payload:{effectName:n,cancelled:O}})]:[3,18];case 17:a.sent(),a.label=18;case 18:return O&&(b.code=b.message=10499),b.code?(10499!==b.code&&r.printError("EFFECTS_ERROR: "+n+" "+b.message),c[r.EFFECTS_PROMISE_REJECT]&&c[r.EFFECTS_PROMISE_REJECT](b.message)):c[r.EFFECTS_PROMISE_RESOLVE]&&c[r.EFFECTS_PROMISE_RESOLVE](b.message),u&&p()(b),[7];case 19:return[2]}}))}}},"./packages/redux-model/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js");a.__exportStar(n("./node_modules/redux-saga/dist/redux-saga-effects-npm-proxy.esm.js"),t),a.__exportStar(n("./packages/model-factory/lib/index.js"),t),a.__exportStar(n("./packages/redux-model/lib/cm.js"),t),a.__exportStar(n("./packages/redux-model/lib/createModel.js"),t),a.__exportStar(n("./packages/redux-model/lib/promiseMiddleware.js"),t);var s=n("./packages/redux-model/lib/createModel.js");Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s.default}})},"./packages/redux-model/lib/promiseMiddleware.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseMiddleware=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=n("./packages/model-factory/lib/index.js");t.promiseMiddleware=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){if(r[s.TKIT_EFFECT]&&!r[s.TKIT_NB_EFFECT]){var c=new Promise((function(c,o){var i;e(a.__assign(((i={})[s.EFFECTS_PROMISE_RESOLVE]=c,i[s.EFFECTS_PROMISE_REJECT]=o,i[s.TKIT_DISPATCH]=t,i[s.TKIT_GET_STATE]=n,i),r))}));return c.then(s.noop,s.noop),c}return e(r)}}}},"./packages/use-model/lib/effectWrapper.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.effectWrapper=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=n("./packages/model-factory/lib/index.js");t.effectWrapper=function(e,t,n,r){var c=t.tPut,o=r&&r.loading||!1,i=r&&r.silent;return function(r){return a.__awaiter(void 0,void 0,void 0,(function(){var l,u,d,p,A,f,b,m,y,g;return a.__generator(this,(function(a){switch(a.label){case 0:return l=!r[s.TKIT_SUB_EFFECT],l?[4,c({type:s.EFFECTS_START,payload:{effectName:n}})]:[3,2];case 1:a.sent(),a.label=2;case 2:u=s.FakeEffectFactory({effectName:n,silent:i,loading:o}),d=u.getResolver,p=u.getRes,A=u.getEffect,l&&A()(),f=p(),a.label=3;case 3:return a.trys.push([3,6,12,15]),"function"!==typeof e?[3,5]:(b=e(t,r),m=f,[4,b]);case 4:m.message=a.sent()||!1,a.label=5;case 5:return[3,15];case 6:y=a.sent(),f.code=10100,f.message=y&&y.message?y.message:y,a.label=7;case 7:return a.trys.push([7,10,,11]),l?[4,c({type:s.EFFECTS_ERROR,payload:{effectName:n,error:y}})]:[3,9];case 8:a.sent(),a.label=9;case 9:return[3,11];case 10:return g=a.sent(),s.printError("HOOKS_EFFECTS_ERROR: "+n+" "+(g&&g.message||g)),[3,11];case 11:return[3,15];case 12:return l?[4,c({type:s.EFFECTS_END,payload:{effectName:n}})]:[3,14];case 13:a.sent(),a.label=14;case 14:return f.code?(s.printError("HOOKS_EFFECTS_ERROR: "+n+" "+f.message),r[s.EFFECTS_PROMISE_REJECT]&&r[s.EFFECTS_PROMISE_REJECT](f.message)):r[s.EFFECTS_PROMISE_RESOLVE]&&r[s.EFFECTS_PROMISE_RESOLVE](f.message),l&&d()(f),[7];case 15:return[2]}}))}))}}},"./packages/use-model/lib/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/tslib/tslib.es6.js");a.__exportStar(n("./packages/model-factory/lib/index.js"),t),a.__exportStar(n("./packages/use-model/lib/types.js"),t),a.__exportStar(n("./packages/use-model/lib/m.js"),t),a.__exportStar(n("./packages/use-model/lib/mm.js"),t),a.__exportStar(n("./packages/use-model/lib/useModel.js"),t)},"./packages/use-model/lib/m.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M=t.Model=void 0;var a=n("./node_modules/tslib/tslib.es6.js").__importDefault(n("./packages/model-factory/lib/index.js"));function s(e){return a.default(e)}t.Model=s,t.M=s},"./packages/use-model/lib/mm.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MM=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=n("./packages/use-model/lib/m.js");t.MM=function(e){return s.M(a.__assign(a.__assign({},e),{m:1}))}},"./packages/use-model/lib/types.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("./node_modules/react/index.js")},"./packages/use-model/lib/useModel.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useModel=t.bindDispatchToAction=t.tCall=void 0;var a=n("./node_modules/tslib/tslib.es6.js"),s=n("./node_modules/react/index.js"),r=n("./packages/model-factory/lib/index.js"),c=n("./packages/use-model/lib/effectWrapper.js");t.tCall=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return console.error("\u753b\u86c7\u6dfb\u8db3\uff0c\u8bf7\u76f4\u63a5\u76f4\u63a5\u8c03\u7528\u201ceffect.name\u201d"),e.apply(t)};var o={local:!0};function i(e,n,s){var i=s.effects,l={},u=function(e){n(e);var t=l[e.type];return t?new Promise((function(n,a){e[r.EFFECTS_PROMISE_RESOLVE]=n,e[r.EFFECTS_PROMISE_REJECT]=a,t(e)})):void 0},d=function(e){return u(e)||e},p=r.putWrapper((function(e){return d(e)})),A=r.putWrapper((function(e){return r.markSubEffect(e),d(e)})),f=r.putWrapper((function(e){return function(e){var t=u(e);return t&&t.catch(r.noop),e}(e)})),b=f,m={tPut:A,tNBPut:f,asyncPut:A,asyncNBPut:f,tCall:t.tCall,namespace:s.namespace};return Object.keys(e).reduce((function(t,n){var r=i[n],u=Array.isArray(r)?a.__assign(a.__assign({},r[1]),o):o;r&&(l[s.TYPES[n]]=c.effectWrapper(Array.isArray(r)?r[0]:r,m,s.TYPES[n],u));var d=e[n];return t[n]=i[n]?function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return p.apply(void 0,a.__spreadArrays([d],e))}:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return b.apply(void 0,a.__spreadArrays([d],e))},t}),{})}t.bindDispatchToAction=i;var l=function(e){return e};t.useModel=function(e,t){void 0===t&&(t=e.state);var n=s.useReducer(l(e.reducers),t),a=n[0],r=n[1],c=s.useRef(!0);return s.useEffect((function(){return function(){c.current=!1}}),[]),[a,s.useMemo((function(){return i(e.actions,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return c.current&&r.apply(null,e)}),e)}),[e,r])]},t.default=t.useModel}}]);
//# sourceMappingURL=packages-async-readme.ce3dafd3f930766622fe.js.map